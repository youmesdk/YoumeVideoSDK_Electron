module.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=22)}([function(e,t,n){var r=n(1),o=n(2);function i(){}i.prototype={norm:function(){for(var e=this.elements.length,t=0;e--;)t+=Math.pow(this.elements[e],2);return Math.sqrt(t)},e:function(e){return e<1||e>this.elements.length?null:this.elements[e-1]},dimensions:function(){return{rows:1,cols:this.elements.length}},rows:function(){return 1},cols:function(){return this.elements.length},modulus:function(){return Math.sqrt(this.dot(this))},eql:function(e){var t=this.elements.length,n=e.elements||e;if(t!=n.length)return!1;for(;t--;)if(Math.abs(this.elements[t]-n[t])>r.precision)return!1;return!0},dup:function(){return i.create(this.elements)},map:function(e){var t=[];return this.each((function(n,r){t.push(e(n,r))})),i.create(t)},each:function(e){for(var t=this.elements.length,n=0;n<t;n++)e(this.elements[n],n+1)},toUnitVector:function(){var e=this.modulus();return 0===e?this.dup():this.map((function(t){return t/e}))},angleFrom:function(e){var t=e.elements||e;if(this.elements.length!=t.length)return null;var n=0,r=0,o=0;if(this.each((function(e,i){n+=e*t[i-1],r+=e*e,o+=t[i-1]*t[i-1]})),r=Math.sqrt(r),o=Math.sqrt(o),r*o==0)return null;var i=n/(r*o);return i<-1&&(i=-1),i>1&&(i=1),Math.acos(i)},isParallelTo:function(e){var t=this.angleFrom(e);return null===t?null:t<=r.precision},isAntiparallelTo:function(e){var t=this.angleFrom(e);return null===t?null:Math.abs(t-Math.PI)<=r.precision},isPerpendicularTo:function(e){var t=this.dot(e);return null===t?null:Math.abs(t)<=r.precision},add:function(e){var t=e.elements||e;return this.elements.length!=t.length?this.map((function(t){return t+e})):this.map((function(e,n){return e+t[n-1]}))},subtract:function(e){if("number"==typeof e)return this.map((function(t){return t-e}));var t=e.elements||e;return this.elements.length!=t.length?null:this.map((function(e,n){return e-t[n-1]}))},multiply:function(e){return this.map((function(t){return t*e}))},elementMultiply:function(e){return this.map((function(t,n){return e.e(n)*t}))},sum:function(){var e=0;return this.map((function(t){e+=t})),e},chomp:function(e){for(var t=[],n=e;n<this.elements.length;n++)t.push(this.elements[n]);return i.create(t)},top:function(e){for(var t=[],n=0;n<e;n++)t.push(this.elements[n]);return i.create(t)},augment:function(e){for(var t=this.elements,n=0;n<e.length;n++)t.push(e[n]);return i.create(t)},x:function(e){return this.multiply(e)},log:function(){return i.log(this)},elementDivide:function(e){return this.map((function(t,n){return t/e.e(n)}))},product:function(){var e=1;return this.map((function(t){e*=t})),e},dot:function(e){var t=e.elements||e,n=0,r=this.elements.length;if(r!=t.length)return null;for(;r--;)n+=this.elements[r]*t[r];return n},cross:function(e){var t=e.elements||e;if(3!=this.elements.length||3!=t.length)return null;var n=this.elements;return i.create([n[1]*t[2]-n[2]*t[1],n[2]*t[0]-n[0]*t[2],n[0]*t[1]-n[1]*t[0]])},max:function(){for(var e=0,t=this.elements.length;t--;)Math.abs(this.elements[t])>Math.abs(e)&&(e=this.elements[t]);return e},maxIndex:function(){for(var e=0,t=this.elements.length,n=-1;t--;)Math.abs(this.elements[t])>Math.abs(e)&&(e=this.elements[t],n=t+1);return n},indexOf:function(e){for(var t=null,n=this.elements.length,r=0;r<n;r++)null===t&&this.elements[r]==e&&(t=r+1);return t},toDiagonalMatrix:function(){return o.Diagonal(this.elements)},round:function(){return this.map((function(e){return Math.round(e)}))},transpose:function(){for(var e=this.elements.length,t=[],n=0;n<e;n++)t.push([this.elements[n]]);return o.create(t)},snapTo:function(e){return this.map((function(t){return Math.abs(t-e)<=r.precision?e:t}))},distanceFrom:function(e){if(e.anchor||e.start&&e.end)return e.distanceFrom(this);var t=e.elements||e;if(t.length!=this.elements.length)return null;var n,r=0;return this.each((function(e,o){n=e-t[o-1],r+=n*n})),Math.sqrt(r)},liesOn:function(e){return e.contains(this)},liesIn:function(e){return e.contains(this)},rotate:function(e,t){var n,r,s,u,a=null;switch(e.determinant&&(a=e.elements),this.elements.length){case 2:return 2!=(n=t.elements||t).length?null:(a||(a=o.Rotation(e).elements),r=this.elements[0]-n[0],s=this.elements[1]-n[1],i.create([n[0]+a[0][0]*r+a[0][1]*s,n[1]+a[1][0]*r+a[1][1]*s]));case 3:if(!t.direction)return null;var l=t.pointClosestTo(this).elements;return a||(a=o.Rotation(e,t.direction).elements),r=this.elements[0]-l[0],s=this.elements[1]-l[1],u=this.elements[2]-l[2],i.create([l[0]+a[0][0]*r+a[0][1]*s+a[0][2]*u,l[1]+a[1][0]*r+a[1][1]*s+a[1][2]*u,l[2]+a[2][0]*r+a[2][1]*s+a[2][2]*u]);default:return null}},reflectionIn:function(e){if(e.anchor){var t=this.elements.slice(),n=e.pointClosestTo(t).elements;return i.create([n[0]+(n[0]-t[0]),n[1]+(n[1]-t[1]),n[2]+(n[2]-(t[2]||0))])}var r=e.elements||e;return this.elements.length!=r.length?null:this.map((function(e,t){return r[t-1]+(r[t-1]-e)}))},to3D:function(){var e=this.dup();switch(e.elements.length){case 3:break;case 2:e.elements.push(0);break;default:return null}return e},inspect:function(){return"["+this.elements.join(", ")+"]"},setElements:function(e){return this.elements=(e.elements||e).slice(),this}},i.create=function(e){return(new i).setElements(e)},i.i=i.create([1,0,0]),i.j=i.create([0,1,0]),i.k=i.create([0,0,1]),i.Random=function(e){for(var t=[];e--;)t.push(Math.random());return i.create(t)},i.Fill=function(e,t){for(var n=[];e--;)n.push(t);return i.create(n)},i.Zero=function(e){return i.Fill(e,0)},i.One=function(e){return i.Fill(e,1)},i.log=function(e){return e.map((function(e){return Math.log(e)}))},e.exports=i},function(e,t){Math.sign=function(e){return e<0?-1:1},e.exports={precision:1e-6,approxPrecision:1e-5}},function(e,t,n){var r=n(1);function o(e,t,n,r){for(var o=e.elements,i=r-1;i--;){for(var s=[],u=0;u<n;u++)s.push(u==i?1:0);o.unshift(s)}for(i=r-1;i<t;i++)for(;o[i].length<n;)o[i].unshift(0);return $M(o)}function s(){for(var e=this,t=a.I(e.rows()),n=e.transpose(),r=a.I(e.cols()),o=Number.MAX_VALUE,i=0;o>22737e-17&&i<100;){var s=n.transpose().qrJs();n=s.R,t=t.x(s.Q),s=n.transpose().qrJs(),r=r.x(s.Q);var u=(n=s.R).triu(1).unroll().norm(),l=n.diagonal().norm();0==l&&(l=1),o=u/l,i++}var c=n.diagonal(),m=[];for(i=1;i<=c.cols();i++){var h=c.e(i);if(m.push(Math.abs(h)),h<0)for(var f=0;f<r.rows();f++)t.elements[f][i-1]=-t.elements[f][i-1]}return{U:r,S:$V(m).toDiagonalMatrix(),V:t}}function u(){for(var e=this.rows(),t=this.cols(),n=a.I(e),r=this,i=1;i<Math.min(e,t);i++){for(var s=r.slice(i,0,i,i).col(1),u=[1];u.length<=e-i;)u.push(0);u=$V(u);var l=s.add(u.x(s.norm()*Math.sign(s.e(1)))),c=$M(l),m=o(a.I(e-i+1).subtract(c.x(2).x(c.transpose()).div(c.transpose().x(c).e(1,1))),e,t,i);r=m.x(r),n=n.x(m)}return{Q:n,R:r}}function a(){}function l(){for(var e=this.dup(),t=a.I(e.rows()),n=a.I(e.rows()),r=a.Zeros(e.rows(),e.cols()),o=1,i=1;i<=Math.min(e.cols(),e.rows());i++){n=e.partialPivot(i,o,n,e,t);for(var s=i+1;s<=e.rows();s++){var u=e.e(s,o)/e.e(i,o);t.elements[s-1][i-1]=u;for(var l=i+1;l<=e.cols();l++)e.elements[s-1][l-1]-=e.e(i,l)*u}for(l=i;l<=e.cols();l++)r.elements[i-1][l-1]=e.e(i,l);o<e.cols()&&o++}return{L:t,U:r,P:n}}n(0),a.prototype={solve:function(e){var t=this.lu();e=t.P.x(e);var n=t.L.forwardSubstitute(e),r=t.U.backSubstitute(n);return t.P.x(r)},pcaProject:function(e,t){var n=(t=t||function(e){var t=e.transpose().x(e).x(1/e.rows()).svd();return{U:t.U,S:t.S}}(this).U).slice(1,t.rows(),1,e);return{Z:this.x(n),U:t}},pcaRecover:function(e){var t=this.cols(),n=e.slice(1,e.rows(),1,t);return this.x(n.transpose())},triu:function(e){return e||(e=0),this.map((function(t,n,r){return r-n>=e?t:0}))},unroll:function(){for(var e=[],t=1;t<=this.cols();t++)for(var n=1;n<=this.rows();n++)e.push(this.e(n,t));return $V(e)},slice:function(e,t,n,r){var o=[];for(0==t&&(t=this.rows()),0==r&&(r=this.cols()),i=e;i<=t;i++){var s=[];for(j=n;j<=r;j++)s.push(this.e(i,j));o.push(s)}return $M(o)},e:function(e,t){return e<1||e>this.elements.length||t<1||t>this.elements[0].length?null:this.elements[e-1][t-1]},row:function(e){return e>this.elements.length?null:$V(this.elements[e-1])},col:function(e){if(e>this.elements[0].length)return null;for(var t=[],n=this.elements.length,r=0;r<n;r++)t.push(this.elements[r][e-1]);return $V(t)},dimensions:function(){return{rows:this.elements.length,cols:this.elements[0].length}},rows:function(){return this.elements.length},cols:function(){return this.elements[0].length},approxEql:function(e){return this.eql(e,r.approxPrecision)},eql:function(e,t){var n=e.elements||e;if(void 0===n[0][0]&&(n=a.create(n).elements),this.elements.length!=n.length||this.elements[0].length!=n[0].length)return!1;for(var o,i=this.elements.length,s=this.elements[0].length;i--;)for(o=s;o--;)if(Math.abs(this.elements[i][o]-n[i][o])>(t||r.precision))return!1;return!0},dup:function(){return a.create(this.elements)},map:function(e){for(var t,n=[],r=this.elements.length,o=this.elements[0].length;r--;)for(t=o,n[r]=[];t--;)n[r][t]=e(this.elements[r][t],r+1,t+1);return a.create(n)},isSameSizeAs:function(e){var t=e.elements||e;return void 0===t[0][0]&&(t=a.create(t).elements),this.elements.length==t.length&&this.elements[0].length==t[0].length},add:function(e){if("number"==typeof e)return this.map((function(t,n,r){return t+e}));var t=e.elements||e;return void 0===t[0][0]&&(t=a.create(t).elements),this.isSameSizeAs(t)?this.map((function(e,n,r){return e+t[n-1][r-1]})):null},subtract:function(e){if("number"==typeof e)return this.map((function(t,n,r){return t-e}));var t=e.elements||e;return void 0===t[0][0]&&(t=a.create(t).elements),this.isSameSizeAs(t)?this.map((function(e,n,r){return e-t[n-1][r-1]})):null},canMultiplyFromLeft:function(e){var t=e.elements||e;return void 0===t[0][0]&&(t=a.create(t).elements),this.elements[0].length==t.length},mulOp:function(e,t){if(!e.elements)return this.map((function(n){return t(n,e)}));var n=!!e.modulus;if(void 0===(p=e.elements||e)[0][0]&&(p=a.create(p).elements),!this.canMultiplyFromLeft(p))return null;for(var r,o,i,s,u,l=this.elements,c=[],m=l.length,h=p[0].length,f=l[0].length,d=m;d--;){for(o=[],r=l[d],s=h;s--;){for(i=0,u=f;u--;)i+=t(r[u],p[u][s]);o[s]=i}c[d]=o}var p=a.create(c);return n?p.col(1):p},div:function(e){return this.mulOp(e,(function(e,t){return e/t}))},multiply:function(e){return this.mulOp(e,(function(e,t){return e*t}))},x:function(e){return this.multiply(e)},elementMultiply:function(e){return this.map((function(t,n,r){return e.e(n,r)*t}))},sum:function(){var e=0;return this.map((function(t){e+=t})),e},mean:function(){for(var e=this.dimensions(),t=[],n=1;n<=e.cols;n++)t.push(this.col(n).sum()/e.rows);return $V(t)},column:function(e){return this.col(e)},log:function(){return this.map((function(e){return Math.log(e)}))},minor:function(e,t,n,r){for(var o,i,s,u=[],l=n,c=this.elements.length,m=this.elements[0].length;l--;)for(u[o=n-l-1]=[],i=r;i--;)s=r-i-1,u[o][s]=this.elements[(e+o-1)%c][(t+s-1)%m];return a.create(u)},transpose:function(){for(var e,t=this.elements.length,n=[],r=this.elements[0].length;r--;)for(e=t,n[r]=[];e--;)n[r][e]=this.elements[e][r];return a.create(n)},isSquare:function(){return this.elements.length==this.elements[0].length},max:function(){for(var e,t=0,n=this.elements.length,r=this.elements[0].length;n--;)for(e=r;e--;)Math.abs(this.elements[n][e])>Math.abs(t)&&(t=this.elements[n][e]);return t},indexOf:function(e){var t,n,r=this.elements.length,o=this.elements[0].length;for(t=0;t<r;t++)for(n=0;n<o;n++)if(this.elements[t][n]==e)return{i:t+1,j:n+1};return null},diagonal:function(){if(!this.isSquare)return null;for(var e=[],t=this.elements.length,n=0;n<t;n++)e.push(this.elements[n][n]);return $V(e)},toRightTriangular:function(){var e,t,n,r,o=this.dup(),i=this.elements.length,s=this.elements[0].length;for(t=0;t<i;t++){if(0==o.elements[t][t])for(n=t+1;n<i;n++)if(0!=o.elements[n][t]){for(e=[],r=0;r<s;r++)e.push(o.elements[t][r]+o.elements[n][r]);o.elements[t]=e;break}if(0!=o.elements[t][t])for(n=t+1;n<i;n++){var u=o.elements[n][t]/o.elements[t][t];for(e=[],r=0;r<s;r++)e.push(r<=t?0:o.elements[n][r]-o.elements[t][r]*u);o.elements[n]=e}}return o},toUpperTriangular:function(){return this.toRightTriangular()},determinant:function(){if(!this.isSquare())return null;if(1==this.cols&&1==this.rows)return this.row(1);if(0==this.cols&&0==this.rows)return 1;for(var e=this.toRightTriangular(),t=e.elements[0][0],n=e.elements.length,r=1;r<n;r++)t*=e.elements[r][r];return t},det:function(){return this.determinant()},isSingular:function(){return this.isSquare()&&0===this.determinant()},trace:function(){if(!this.isSquare())return null;for(var e=this.elements[0][0],t=this.elements.length,n=1;n<t;n++)e+=this.elements[n][n];return e},tr:function(){return this.trace()},rank:function(){for(var e,t=this.toRightTriangular(),n=0,o=this.elements.length,i=this.elements[0].length;o--;)for(e=i;e--;)if(Math.abs(t.elements[o][e])>r.precision){n++;break}return n},rk:function(){return this.rank()},augment:function(e){var t=e.elements||e;void 0===t[0][0]&&(t=a.create(t).elements);var n,r=this.dup(),o=r.elements[0].length,i=r.elements.length,s=t[0].length;if(i!=t.length)return null;for(;i--;)for(n=s;n--;)r.elements[i][o+n]=t[i][n];return r},inverse:function(){if(!this.isSquare()||this.isSingular())return null;for(var e,t,n,r,o,i=this.elements.length,s=i,u=this.augment(a.I(i)).toRightTriangular(),l=u.elements[0].length,c=[];s--;){for(n=[],c[s]=[],r=u.elements[s][s],t=0;t<l;t++)o=u.elements[s][t]/r,n.push(o),t>=i&&c[s].push(o);for(u.elements[s]=n,e=s;e--;){for(n=[],t=0;t<l;t++)n.push(u.elements[e][t]-u.elements[s][t]*u.elements[e][s]);u.elements[e]=n}}return a.create(c)},inv:function(){return this.inverse()},round:function(){return this.map((function(e){return Math.round(e)}))},snapTo:function(e){return this.map((function(t){return Math.abs(t-e)<=r.precision?e:t}))},inspect:function(){for(var e=[],t=this.elements.length,n=0;n<t;n++)e.push($V(this.elements[n]).inspect());return e.join("\n")},toArray:function(){for(var e=[],t=this.elements.length,n=0;n<t;n++)e.push(this.elements[n]);return e},setElements:function(e){var t,n,r=e.elements||e;if(void 0!==r[0][0]){for(t=r.length,this.elements=[];t--;)for(n=r[t].length,this.elements[t]=[];n--;)this.elements[t][n]=r[t][n];return this}var o=r.length;for(this.elements=[],t=0;t<o;t++)this.elements.push([r[t]]);return this},maxColumnIndexes:function(){for(var e=[],t=1;t<=this.rows();t++){for(var n=null,r=-1,o=1;o<=this.cols();o++)(null===n||this.e(t,o)>n)&&(n=this.e(t,o),r=o);e.push(r)}return $V(e)},maxColumns:function(){for(var e=[],t=1;t<=this.rows();t++){for(var n=null,r=1;r<=this.cols();r++)(null===n||this.e(t,r)>n)&&(n=this.e(t,r));e.push(n)}return $V(e)},minColumnIndexes:function(){for(var e=[],t=1;t<=this.rows();t++){for(var n=null,r=-1,o=1;o<=this.cols();o++)(null===n||this.e(t,o)<n)&&(n=this.e(t,o),r=o);e.push(r)}return $V(e)},minColumns:function(){for(var e=[],t=1;t<=this.rows();t++){for(var n=null,r=1;r<=this.cols();r++)(null===n||this.e(t,r)<n)&&(n=this.e(t,r));e.push(n)}return $V(e)},partialPivot:function(e,t,n,r,o){for(var i=0,s=0,u=e;u<=r.rows();u++)Math.abs(r.e(u,t))>s&&(s=Math.abs(r.e(e,t)),i=u);if(i!=e){var a=r.elements[e-1];r.elements[e-1]=r.elements[i-1],r.elements[i-1]=a,n.elements[e-1][e-1]=0,n.elements[e-1][i-1]=1,n.elements[i-1][i-1]=0,n.elements[i-1][e-1]=1}return n},forwardSubstitute:function(e){for(var t=[],n=1;n<=this.rows();n++){for(var r=0,o=1;o<n;o++)r+=this.e(n,o)*t[o-1];t.push((e.e(n)-r)/this.e(n,n))}return $V(t)},backSubstitute:function(e){for(var t=[],n=this.rows();n>0;n--){for(var r=0,o=this.cols();o>n;o--)r+=this.e(n,o)*t[this.rows()-o];t.push((e.e(n)-r)/this.e(n,n))}return $V(t.reverse())},luJs:l,svdJs:s,qrJs:u},a.prototype.svd=s,a.prototype.qr=u,a.prototype.lu=l,a.create=function(e){return(new a).setElements(e)},a.I=function(e){for(var t,n=[],r=e;r--;)for(t=e,n[r]=[];t--;)n[r][t]=r==t?1:0;return a.create(n)},a.loadFile=function(e){for(var t=[],r=n(14).readFileSync(e,"utf-8").split("\n"),o=0;o<r.length;o++){var i=r[o].split(",");i.length>1&&t.push(i)}return(new a).setElements(t)},a.Diagonal=function(e){for(var t=e.length,n=a.I(t);t--;)n.elements[t][t]=e[t];return n},a.Rotation=function(e,t){if(!t)return a.create([[Math.cos(e),-Math.sin(e)],[Math.sin(e),Math.cos(e)]]);var n=t.dup();if(3!=n.elements.length)return null;var r=n.modulus(),o=n.elements[0]/r,i=n.elements[1]/r,s=n.elements[2]/r,u=Math.sin(e),l=Math.cos(e),c=1-l;return a.create([[c*o*o+l,c*o*i-u*s,c*o*s+u*i],[c*o*i+u*s,c*i*i+l,c*i*s-u*o],[c*o*s-u*i,c*i*s+u*o,c*s*s+l]])},a.RotationX=function(e){var t=Math.cos(e),n=Math.sin(e);return a.create([[1,0,0],[0,t,-n],[0,n,t]])},a.RotationY=function(e){var t=Math.cos(e),n=Math.sin(e);return a.create([[t,0,n],[0,1,0],[-n,0,t]])},a.RotationZ=function(e){var t=Math.cos(e),n=Math.sin(e);return a.create([[t,-n,0],[n,t,0],[0,0,1]])},a.Random=function(e,t){return 1===arguments.length&&(t=e),a.Zero(e,t).map((function(){return Math.random()}))},a.Fill=function(e,t,n){2===arguments.length&&(n=t,t=e);for(var r,o=[],i=e;i--;)for(r=t,o[i]=[];r--;)o[i][r]=n;return a.create(o)},a.Zero=function(e,t){return a.Fill(e,t,0)},a.Zeros=function(e,t){return a.Zero(e,t)},a.One=function(e,t){return a.Fill(e,t,1)},a.Ones=function(e,t){return a.One(e,t)},e.exports=a},function(e,t){e.exports=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}},function(e,t){e.exports=function(e){return Object.prototype.toString.call(e).slice(8,-1)}},function(e,t,n){"use strict";var r=n(6);e.exports=function(e,t){e||r(t)}},function(e,t,n){"use strict";e.exports=function(e){console.error(e),console.trace()}},function(e,t,n){"use strict";function r(e,t){this.w=e,this.h=t}r.prototype={toString:function(){return"("+this.w+", "+this.h+")"},getHalfSize:function(){return new r(this.w>>>1,this.h>>>1)},length:function(){return this.w*this.h}},e.exports=r},function(e,t,n){"use strict";var r=n(5);function o(){}o.createFromElementId=function(e){var t=document.getElementById(e);r(t,"Could not find shader with ID: "+e);for(var n="",o=t.firstChild;o;)3==o.nodeType&&(n+=o.textContent),o=o.nextSibling;var i=new Scriptor;return i.type=t.type,i.source=n,i},o.createFromSource=function(e,t){var n=new o;return n.type=e,n.source=t,n},e.exports=o},function(e,t,n){var r=Function("return this")();t.Vector=n(0),r.$V=t.Vector.create,t.Matrix=n(2),r.$M=t.Matrix.create,t.Line=n(10),r.$L=t.Line.create,t.Plane=n(19),r.$P=t.Plane.create,t.Line.Segment=n(31),t.Sylvester=n(1)},function(e,t,n){var r=n(0),o=n(2),i=n(19),s=n(1);function u(){}u.prototype={eql:function(e){return this.isParallelTo(e)&&this.contains(e.anchor)},dup:function(){return u.create(this.anchor,this.direction)},translate:function(e){var t=e.elements||e;return u.create([this.anchor.elements[0]+t[0],this.anchor.elements[1]+t[1],this.anchor.elements[2]+(t[2]||0)],this.direction)},isParallelTo:function(e){if(e.normal||e.start&&e.end)return e.isParallelTo(this);var t=this.direction.angleFrom(e.direction);return Math.abs(t)<=s.precision||Math.abs(t-Math.PI)<=s.precision},distanceFrom:function(e){if(e.normal||e.start&&e.end)return e.distanceFrom(this);if(e.direction){if(this.isParallelTo(e))return this.distanceFrom(e.anchor);var t=this.direction.cross(e.direction).toUnitVector().elements,n=this.anchor.elements,r=e.anchor.elements;return Math.abs((n[0]-r[0])*t[0]+(n[1]-r[1])*t[1]+(n[2]-r[2])*t[2])}var o=e.elements||e,i=(n=this.anchor.elements,this.direction.elements),s=o[0]-n[0],u=o[1]-n[1],a=(o[2]||0)-n[2],l=Math.sqrt(s*s+u*u+a*a);if(0===l)return 0;var c=(s*i[0]+u*i[1]+a*i[2])/l,m=1-c*c;return Math.abs(l*Math.sqrt(m<0?0:m))},contains:function(e){if(e.start&&e.end)return this.contains(e.start)&&this.contains(e.end);var t=this.distanceFrom(e);return null!==t&&t<=s.precision},positionOf:function(e){if(!this.contains(e))return null;var t=e.elements||e,n=this.anchor.elements,r=this.direction.elements;return(t[0]-n[0])*r[0]+(t[1]-n[1])*r[1]+((t[2]||0)-n[2])*r[2]},liesIn:function(e){return e.contains(this)},intersects:function(e){return e.normal?e.intersects(this):!this.isParallelTo(e)&&this.distanceFrom(e)<=s.precision},intersectionWith:function(e){if(e.normal||e.start&&e.end)return e.intersectionWith(this);if(!this.intersects(e))return null;var t=this.anchor.elements,n=this.direction.elements,o=e.anchor.elements,i=e.direction.elements,s=n[0],u=n[1],a=n[2],l=i[0],c=i[1],m=i[2],h=t[0]-o[0],f=t[1]-o[1],d=t[2]-o[2],p=l*l+c*c+m*m,_=s*l+u*c+a*m,g=((-s*h-u*f-a*d)*p/(s*s+u*u+a*a)+_*(l*h+c*f+m*d))/(p-_*_);return r.create([t[0]+g*s,t[1]+g*u,t[2]+g*a])},pointClosestTo:function(e){if(e.start&&e.end)return null===(h=e.pointClosestTo(this))?null:this.pointClosestTo(h);if(e.direction){if(this.intersects(e))return this.intersectionWith(e);if(this.isParallelTo(e))return null;var t=this.direction.elements,n=e.direction.elements,o=t[0],s=t[1],u=t[2],a=n[0],l=n[1],c=n[2],m=[(g=u*a-o*c)*c-(E=o*l-s*a)*l,E*a-(v=s*c-u*l)*c,v*l-g*a];return(h=i.create(e.anchor,m)).intersectionWith(this)}var h=e.elements||e;if(this.contains(h))return r.create(h);var f=this.anchor.elements,d=(o=(t=this.direction.elements)[0],s=t[1],u=t[2],f[0]),p=f[1],_=f[2],g=o*(h[1]-p)-s*(h[0]-d),E=s*((h[2]||0)-_)-u*(h[1]-p),v=u*(h[0]-d)-o*((h[2]||0)-_),y=r.create([s*g-u*v,u*E-o*g,o*v-s*E]),M=this.distanceFrom(h)/y.modulus();return r.create([h[0]+y.elements[0]*M,h[1]+y.elements[1]*M,(h[2]||0)+y.elements[2]*M])},rotate:function(e,t){void 0===t.direction&&(t=u.create(t.to3D(),r.k));var n=o.Rotation(e,t.direction).elements,i=t.pointClosestTo(this.anchor).elements,s=this.anchor.elements,a=this.direction.elements,l=i[0],c=i[1],m=i[2],h=s[0]-l,f=s[1]-c,d=s[2]-m;return u.create([l+n[0][0]*h+n[0][1]*f+n[0][2]*d,c+n[1][0]*h+n[1][1]*f+n[1][2]*d,m+n[2][0]*h+n[2][1]*f+n[2][2]*d],[n[0][0]*a[0]+n[0][1]*a[1]+n[0][2]*a[2],n[1][0]*a[0]+n[1][1]*a[1]+n[1][2]*a[2],n[2][0]*a[0]+n[2][1]*a[1]+n[2][2]*a[2]])},reverse:function(){return u.create(this.anchor,this.direction.x(-1))},reflectionIn:function(e){if(e.normal){var t=this.anchor.elements,n=this.direction.elements,r=t[0],o=t[1],i=t[2],s=n[0],a=n[1],l=n[2],c=this.anchor.reflectionIn(e).elements,m=r+s,h=o+a,f=i+l,d=e.pointClosestTo([m,h,f]).elements,p=[d[0]+(d[0]-m)-c[0],d[1]+(d[1]-h)-c[1],d[2]+(d[2]-f)-c[2]];return u.create(c,p)}if(e.direction)return this.rotate(Math.PI,e);var _=e.elements||e;return u.create(this.anchor.reflectionIn([_[0],_[1],_[2]||0]),this.direction)},setVectors:function(e,t){if(e=r.create(e),t=r.create(t),2==e.elements.length&&e.elements.push(0),2==t.elements.length&&t.elements.push(0),e.elements.length>3||t.elements.length>3)return null;var n=t.modulus();return 0===n?null:(this.anchor=e,this.direction=r.create([t.elements[0]/n,t.elements[1]/n,t.elements[2]/n]),this)}},u.create=function(e,t){return(new u).setVectors(e,t)},u.X=u.create(r.Zero(3),r.i),u.Y=u.create(r.Zero(3),r.j),u.Z=u.create(r.Zero(3),r.k),e.exports=u},function(e,t,n){"use strict";var r=n(3),o=n(32),i=n(34),s=n(4),u=n(12),a=n(39),l=/^Implements|Extends|Binds$/;e.exports=function(e){"Function"===s(e)&&(e={initialize:e});var t=e.Extends,n=r(e,"initialize")?e.initialize:t||function(){},c=function(){var t=this;for(var r in e.Binds&&e.Binds.forEach((function(e){var n=t[e];n&&(t[e]=u(t[e].bind(t),n))})),c.prototype){var o=c.prototype[r],a=s(o);r.match(l)||"Function"===a||"GeneratorFunction"==a||(t[r]="Object"==a?i({},t[r]):"Array"==a?o.slice():o)}e.Implements&&e.Implements.forEach((function(e){e.call(t)})),n.apply(this,arguments)};if(t){var m=t.prototype;m.Binds&&(e.Binds=(e.Binds||[]).concat(m.Binds)),m.Implements&&(e.Implements=(e.Implements||[]).concat(m.Implements));var h=c.prototype=o(m);c.parent=m,h.constructor=c}return e.Implements&&("Array"!==s(e.Implements)&&(e.Implements=[e.Implements]),e.Implements.forEach((function(e){a(c,e.prototype)}))),a(c,e),e.Binds&&(c.prototype.Binds=e.Binds),e.Implements&&(c.prototype.Implements=e.Implements),c}},function(e,t,n){var r=n(20);function o(e,t){this[t]=e}e.exports=function(e,t){for(var n,i=0,s=arguments.length;++i<s;)null!=(n=arguments[i])&&r(n,o,e);return e}},function(e,t){e.exports=require("ref-napi")},function(e,t){e.exports=require("fs")},function(e,t,n){"use strict";var r=n(5);function o(e){this.gl=e,this.program=this.gl.createProgram()}o.prototype={attach:function(e){this.gl.attachShader(this.program,e.shader)},link:function(){this.gl.linkProgram(this.program),r(this.gl.getProgramParameter(this.program,this.gl.LINK_STATUS),"Unable to initialize the shader program.")},use:function(){this.gl.useProgram(this.program)},getAttributeLocation:function(e){return this.gl.getAttribLocation(this.program,e)},setMatrixUniform:function(e,t){var n=this.gl.getUniformLocation(this.program,e);this.gl.uniformMatrix4fv(n,!1,t)}},e.exports=o},function(e,t,n){"use strict";var r=n(6);e.exports=function(e,t){if("x-shader/x-fragment"==t.type)this.shader=e.createShader(e.FRAGMENT_SHADER);else{if("x-shader/x-vertex"!=t.type)return void r("Unknown shader type: "+t.type);this.shader=e.createShader(e.VERTEX_SHADER)}try{e.shaderSource(this.shader,t.source)}catch(e){return void console.error(e)}e.compileShader(this.shader),e.getShaderParameter(this.shader,e.COMPILE_STATUS)||r("An error occurred compiling the shaders: "+e.getShaderInfoLog(this.shader))}},function(e,t,n){"use strict";var r=n(5);function o(e,t,n){this.gl=e,this.size=t,this.texture=e.createTexture(),e.bindTexture(e.TEXTURE_2D,this.texture),this.format=n||e.LUMINANCE,e.texImage2D(e.TEXTURE_2D,0,this.format,t.w,t.h,0,this.format,e.UNSIGNED_BYTE,null),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)}var i=null;o.prototype={fill:function(e,t=!1){var n=this.gl;r(e.length>=this.size.w*this.size.h,"Texture size mismatch, data:"+e.length+", texture: "+this.size.w*this.size.h),n.bindTexture(n.TEXTURE_2D,this.texture),t?n.texSubImage2D(n.TEXTURE_2D,0,0,0,this.size.w,this.size.h,this.format,n.UNSIGNED_BYTE,e):n.texImage2D(n.TEXTURE_2D,0,this.format,this.size.w,this.size.h,0,this.format,n.UNSIGNED_BYTE,e)},bind:function(e,t,n){var r=this.gl;i||(i=[r.TEXTURE0,r.TEXTURE1,r.TEXTURE2]),r.activeTexture(i[e]),r.bindTexture(r.TEXTURE_2D,this.texture),r.uniform1i(r.getUniformLocation(t.program,n),e)}},e.exports=o},function(e,t,n){"use strict";var r=n(8),o=n(6),i=n(30).makePerspective,s=n(9).Matrix,u=n(11),a=r.createFromSource("x-shader/x-vertex","\n  attribute vec3 aVertexPosition;\n  attribute vec2 aTextureCoord;\n  uniform mat4 uMVMatrix;\n  uniform mat4 uPMatrix;\n  varying lowp vec2 vTextureCoord;\n  void main(void) {\n    gl_Position = uPMatrix * uMVMatrix * vec4(aVertexPosition, 1.0);\n    vTextureCoord = aTextureCoord;\n  }\n"),l=r.createFromSource("x-shader/x-fragment","\n  precision lowp float;\n  varying lowp vec2 vTextureCoord;\n  uniform sampler2D texture;\n  void main(void) {\n    gl_FragColor = texture2D(texture, vTextureCoord);\n  }\n"),c=new u({initialize:function(e,t,n){this.canvas=e,this.size=t,this.canvas.width=t.w,this.canvas.height=t.h,this.gl||this.onInitWebGL(),this.gl.viewport(0,0,this.canvas.width,this.canvas.height),this.onInitShaders(),this.initBuffers(),n&&this.initFramebuffer(),this.onInitTextures(),this.initScene()},initFramebuffer:function(){var e=this.gl;this.framebuffer=e.createFramebuffer(),e.bindFramebuffer(e.FRAMEBUFFER,this.framebuffer),this.framebufferTexture=new Texture(this.gl,this.size,e.RGBA);var t=e.createRenderbuffer();e.bindRenderbuffer(e.RENDERBUFFER,t),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_COMPONENT16,this.size.w,this.size.h),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this.framebufferTexture.texture,0),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,t)},initBuffers:function(){var e,t=this.gl;this.quadVPBuffer=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.quadVPBuffer),e=[1,1,0,-1,1,0,1,-1,0,-1,-1,0],t.bufferData(t.ARRAY_BUFFER,new Float32Array(e),t.STATIC_DRAW),this.quadVPBuffer.itemSize=3,this.quadVPBuffer.numItems=4,this.quadVTCBuffer=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.quadVTCBuffer),e=[1,0,0,0,1,1,0,1],t.bufferData(t.ARRAY_BUFFER,new Float32Array(e),t.STATIC_DRAW)},mvIdentity:function(){this.mvMatrix=s.I(4)},mvMultiply:function(e){this.mvMatrix=this.mvMatrix.x(e)},mvTranslate:function(e){this.mvMultiply(s.Translation($V([e[0],e[1],e[2]])).ensure4x4())},setMatrixUniforms:function(){this.program.setMatrixUniform("uPMatrix",new Float32Array(this.perspectiveMatrix.flatten())),this.program.setMatrixUniform("uMVMatrix",new Float32Array(this.mvMatrix.flatten()))},initScene:function(){var e=this.gl;this.perspectiveMatrix=i(45,1,.1,100),this.mvIdentity(),this.mvTranslate([0,0,-2.4]),e.bindBuffer(e.ARRAY_BUFFER,this.quadVPBuffer),e.vertexAttribPointer(this.vertexPositionAttribute,3,e.FLOAT,!1,0,0),e.bindBuffer(e.ARRAY_BUFFER,this.quadVTCBuffer),e.vertexAttribPointer(this.textureCoordAttribute,2,e.FLOAT,!1,0,0),this.onInitSceneTextures(),this.setMatrixUniforms(),this.framebuffer&&(console.log("Bound Frame Buffer"),e.bindFramebuffer(e.FRAMEBUFFER,this.framebuffer))},toString:function(){return"WebGLCanvas Size: "+this.size},checkLastError:function(e){var t=this.gl.getError();if(t!=this.gl.NO_ERROR){var n=this.glNames[t];n=void 0!==n?n+"("+t+")":"Unknown WebGL ENUM (0x"+value.toString(16)+")",e?console.log("WebGL Error: %s, %s",e,n):console.log("WebGL Error: %s",n),console.trace()}},onInitWebGL:function(){try{this.gl=this.canvas.getContext("experimental-webgl",{antialias:!1,depth:!1,alpha:!1})||this.canvas.getContext("webgl",{antialias:!1,depth:!1,alpha:!1})}catch(e){}if(this.gl||o("Unable to initialize WebGL. Your browser may not support it."),!this.glNames)for(var e in this.glNames={},this.gl)"number"==typeof this.gl[e]&&(this.glNames[this.gl[e]]=e)},onInitShaders:function(){this.program=new Program(this.gl),this.program.attach(new Shader(this.gl,a)),this.program.attach(new Shader(this.gl,l)),this.program.link(),this.program.use(),this.vertexPositionAttribute=this.program.getAttributeLocation("aVertexPosition"),this.gl.enableVertexAttribArray(this.vertexPositionAttribute),this.textureCoordAttribute=this.program.getAttributeLocation("aTextureCoord"),this.gl.enableVertexAttribArray(this.textureCoordAttribute)},onInitTextures:function(){var e=this.gl;this.texture=new Texture(e,this.size,e.RGBA)},onInitSceneTextures:function(){this.texture.bind(0,this.program,"texture")},drawScene:function(){this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4)},readPixels:function(e){var t=this.gl;t.readPixels(0,0,this.size.w,this.size.h,t.RGBA,t.UNSIGNED_BYTE,e)}});e.exports=c},function(e,t,n){var r=n(0),o=n(2),i=n(10),s=n(1);function u(){}u.prototype={eql:function(e){return this.contains(e.anchor)&&this.isParallelTo(e)},dup:function(){return u.create(this.anchor,this.normal)},translate:function(e){var t=e.elements||e;return u.create([this.anchor.elements[0]+t[0],this.anchor.elements[1]+t[1],this.anchor.elements[2]+(t[2]||0)],this.normal)},isParallelTo:function(e){var t;return e.normal?(t=this.normal.angleFrom(e.normal),Math.abs(t)<=s.precision||Math.abs(Math.PI-t)<=s.precision):e.direction?this.normal.isPerpendicularTo(e.direction):null},isPerpendicularTo:function(e){var t=this.normal.angleFrom(e.normal);return Math.abs(Math.PI/2-t)<=s.precision},distanceFrom:function(e){if(this.intersects(e)||this.contains(e))return 0;if(e.anchor){var t=this.anchor.elements,n=e.anchor.elements,r=this.normal.elements;return Math.abs((t[0]-n[0])*r[0]+(t[1]-n[1])*r[1]+(t[2]-n[2])*r[2])}var o=e.elements||e;return t=this.anchor.elements,r=this.normal.elements,Math.abs((t[0]-o[0])*r[0]+(t[1]-o[1])*r[1]+(t[2]-(o[2]||0))*r[2])},contains:function(e){if(e.normal)return null;if(e.direction)return this.contains(e.anchor)&&this.contains(e.anchor.add(e.direction));var t=e.elements||e,n=this.anchor.elements,r=this.normal.elements;return Math.abs(r[0]*(n[0]-t[0])+r[1]*(n[1]-t[1])+r[2]*(n[2]-(t[2]||0)))<=s.precision},intersects:function(e){return void 0===e.direction&&void 0===e.normal?null:!this.isParallelTo(e)},intersectionWith:function(e){if(!this.intersects(e))return null;if(e.direction){var t=e.anchor.elements,n=e.direction.elements,s=this.anchor.elements,u=((l=this.normal.elements)[0]*(s[0]-t[0])+l[1]*(s[1]-t[1])+l[2]*(s[2]-t[2]))/(l[0]*n[0]+l[1]*n[1]+l[2]*n[2]);return r.create([t[0]+n[0]*u,t[1]+n[1]*u,t[2]+n[2]*u])}if(e.normal){for(var a=this.normal.cross(e.normal).toUnitVector(),l=this.normal.elements,c=(t=this.anchor.elements,e.normal.elements),m=e.anchor.elements,h=o.Zero(2,2),f=0;h.isSingular();)f++,h=o.create([[l[f%3],l[(f+1)%3]],[c[f%3],c[(f+1)%3]]]);for(var d=h.inverse().elements,p=l[0]*t[0]+l[1]*t[1]+l[2]*t[2],_=c[0]*m[0]+c[1]*m[1]+c[2]*m[2],g=[d[0][0]*p+d[0][1]*_,d[1][0]*p+d[1][1]*_],E=[],v=1;v<=3;v++)E.push(f==v?0:g[(v+(5-f)%3)%3]);return i.create(E,a)}},pointClosestTo:function(e){var t=e.elements||e,n=this.anchor.elements,o=this.normal.elements,i=(n[0]-t[0])*o[0]+(n[1]-t[1])*o[1]+(n[2]-(t[2]||0))*o[2];return r.create([t[0]+o[0]*i,t[1]+o[1]*i,(t[2]||0)+o[2]*i])},rotate:function(e,t){var n=e.determinant?e.elements:o.Rotation(e,t.direction).elements,r=t.pointClosestTo(this.anchor).elements,i=this.anchor.elements,s=this.normal.elements,a=r[0],l=r[1],c=r[2],m=i[0]-a,h=i[1]-l,f=i[2]-c;return u.create([a+n[0][0]*m+n[0][1]*h+n[0][2]*f,l+n[1][0]*m+n[1][1]*h+n[1][2]*f,c+n[2][0]*m+n[2][1]*h+n[2][2]*f],[n[0][0]*s[0]+n[0][1]*s[1]+n[0][2]*s[2],n[1][0]*s[0]+n[1][1]*s[1]+n[1][2]*s[2],n[2][0]*s[0]+n[2][1]*s[1]+n[2][2]*s[2]])},reflectionIn:function(e){if(e.normal){var t=this.anchor.elements,n=this.normal.elements,r=t[0],o=t[1],i=t[2],s=n[0],a=n[1],l=n[2],c=this.anchor.reflectionIn(e).elements,m=r+s,h=o+a,f=i+l,d=e.pointClosestTo([m,h,f]).elements,p=[d[0]+(d[0]-m)-c[0],d[1]+(d[1]-h)-c[1],d[2]+(d[2]-f)-c[2]];return u.create(c,p)}if(e.direction)return this.rotate(Math.PI,e);var _=e.elements||e;return u.create(this.anchor.reflectionIn([_[0],_[1],_[2]||0]),this.normal)},setVectors:function(e,t,n){if(null===(e=(e=r.create(e)).to3D()))return null;if(null===(t=(t=r.create(t)).to3D()))return null;if(void 0===n)n=null;else if(null===(n=(n=r.create(n)).to3D()))return null;var o,i,s=e.elements[0],u=e.elements[1],a=e.elements[2],l=t.elements[0],c=t.elements[1],m=t.elements[2];if(null!==n){var h=n.elements[0],f=n.elements[1],d=n.elements[2];if(0===(i=(o=r.create([(c-u)*(d-a)-(m-a)*(f-u),(m-a)*(h-s)-(l-s)*(d-a),(l-s)*(f-u)-(c-u)*(h-s)])).modulus()))return null;o=r.create([o.elements[0]/i,o.elements[1]/i,o.elements[2]/i])}else{if(0===(i=Math.sqrt(l*l+c*c+m*m)))return null;o=r.create([t.elements[0]/i,t.elements[1]/i,t.elements[2]/i])}return this.anchor=e,this.normal=o,this}},u.create=function(e,t,n){return(new u).setVectors(e,t,n)},u.XY=u.create(r.Zero(3),r.k),u.YZ=u.create(r.Zero(3),r.i),u.ZX=u.create(r.Zero(3),r.j),u.YX=u.XY,u.ZY=u.YZ,u.XZ=u.ZX,u.fromPoints=function(e){var t,n,o,i,a,l,c,m,h,f,d=e.length,p=[],_=r.Zero(3);for(t=0;t<d;t++){if(null===(n=r.create(e[t]).to3D()))return null;if(p.push(n),(o=p.length)>2){if(a=p[o-1].elements,l=p[o-2].elements,c=p[o-3].elements,i=r.create([(a[1]-l[1])*(c[2]-l[2])-(a[2]-l[2])*(c[1]-l[1]),(a[2]-l[2])*(c[0]-l[0])-(a[0]-l[0])*(c[2]-l[2]),(a[0]-l[0])*(c[1]-l[1])-(a[1]-l[1])*(c[0]-l[0])]).toUnitVector(),o>3&&null!==(h=i.angleFrom(f))&&!(Math.abs(h)<=s.precision||Math.abs(h-Math.PI)<=s.precision))return null;_=_.add(i),f=i}}return a=p[1].elements,l=p[0].elements,c=p[o-1].elements,m=p[o-2].elements,_=_.add(r.create([(a[1]-l[1])*(c[2]-l[2])-(a[2]-l[2])*(c[1]-l[1]),(a[2]-l[2])*(c[0]-l[0])-(a[0]-l[0])*(c[2]-l[2]),(a[0]-l[0])*(c[1]-l[1])-(a[1]-l[1])*(c[0]-l[0])]).toUnitVector()).add(r.create([(l[1]-c[1])*(m[2]-c[2])-(l[2]-c[2])*(m[1]-c[1]),(l[2]-c[2])*(m[0]-c[0])-(l[0]-c[0])*(m[2]-c[2]),(l[0]-c[0])*(m[1]-c[1])-(l[1]-c[1])*(m[0]-c[0])]).toUnitVector()),u.create(p[0],_)},e.exports=u},function(e,t,n){var r=n(3),o=n(33);e.exports=function(e,t,n){o(e,(function(o,i){if(r(e,i))return t.call(n,e[i],i,e)}))}},function(e,t){e.exports=function(e){return!!e&&"object"==typeof e&&e.constructor===Object}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(23),o=n(13),i=n(41),s=null,u=null,a=null,l=null,c=null,m=null,h=null,f=null,d=null,p=null,_=null,g={},E={},v={},y={};function M(e){return e&&"function"==typeof e}var b=function(){function e(){}return e.getInstance=function(){return this._instance||r.startGetMsg(),this._instance||(this._instance=new e)},e.prototype.registerVideoCallback=function(e){r.registerVideoCallback(e)},e.prototype.unRegisterVideoCallback=function(){r.unRegisterVideoCallback()},e.setJSLogLevel=function(e){i.YMLogUtils.setLogLevel(e)},e.getJSLogLevel=function(){return i.YMLogUtils.getLogLevel()},e.prototype.init=function(e,t,n,o,i){M(i)&&(s=i);var u=r.init(e,t,n,o);return 0!==u&&M(i)&&i(u),u},e.prototype.uninit=function(){return r.uninit()},e.prototype.joinChannelSingleMode=function(e,t,n,o,i){void 0===o&&(o=!1),M(i)&&(u=i);var s=r.joinChannelSingleMode(e,t,n,o);return 0!==s&&M(i)&&i(s),s},e.prototype.removeCanvasBind=function(e){return r.removeCanvasBind(e)},e.prototype.leaveChannelAll=function(e){e&&(a=e);var t=r.leaveChannelAll();return 0!==t&&M(e)&&e(t),t},e.prototype.setMicrophoneMute=function(e,t){t&&(e?c=t:l=t),r.setMicrophoneMute(e)},e.prototype.getMicrophoneMute=function(){return r.getMicrophoneMute()},e.prototype.getSpeakerMute=function(){return r.getSpeakerMute()},e.prototype.setSpeakerMute=function(e,t){t&&(e?h=t:m=t),r.setSpeakerMute(e)},e.prototype.stopCapture=function(e){M(e)&&(d=e);var t=r.stopCapture();return 0!==t&&M(e)&&e(t),t},e.prototype.startCapture=function(e){M(e)&&(f=e);var t=r.startCapture();return 0!==t&&M(e)&&e(t),t},e.prototype.setExternalInputMode=function(e){r.setExternalInputMode(e)},e.prototype.setAVStatisticInterval=function(e){r.setAVStatisticInterval(e)},e.prototype.setVideoLocalResolution=function(e,t){return r.setVideoLocalResolution(e,t)},e.prototype.setVideoNetResolution=function(e,t){return r.setVideoNetResolution(e,t)},e.prototype.setMixVideoSize=function(e,t){r.setMixVideoSize(e,t)},e.prototype.videoEngineModelEnabled=function(e){r.videoEngineModelEnabled(e)},e.prototype.getCameraCount=function(){return r.getCameraCount()},e.prototype.getCameraName=function(e){return r.getCameraName(e)},e.prototype.setOpenCameraId=function(e){return r.setOpenCameraId(e)},e.prototype.setVideoSmooth=function(e){return r.setVideoSmooth(e)},e.prototype.setVideoCallback=function(){return r.setVideoCallback()},e.prototype.setAutoSendStatus=function(e){r.setAutoSendStatus(e)},e.prototype.setVolume=function(e){r.setVolume(e)},e.prototype.getVolume=function(){return r.getVolume()},e.prototype.getVideoFrame=function(e,t,n,o){return r.getVideoFrame(e,t,n,o)},e.prototype.getVideoFrameNew=function(e,t,n,o,i){return r.getVideoFrameNew(e,t,n,o,i)},e.prototype.pauseChannel=function(e){M(e)&&(p=e);var t=r.pauseChannel();return 0!==t&&M(e)&&e(t),t},e.prototype.resumeChannel=function(e){M(e)&&(_=e);var t=r.resumeChannel();return 0!==t&&M(e)&&e(t),t},e.prototype.maskVideoByUserId=function(e,t,n){var o=r.maskVideoByUserId(e,t,(function(r,i){0===o?n&&(t?g[e]=n:E[e]=n):M(n)&&n(o)}));return o},e.prototype.getSDKVersion=function(){return r.getSDKVersion()},e.prototype.setToken=function(e){r.setToken(e)},e.prototype.setAudioQuality=function(e){r.setAudioQuality(e)},e.prototype.setOtherMicMute=function(e,t){return r.setOtherMicMute(e,t)},e.prototype.setOtherSpeakerMute=function(e,t){return r.setOtherSpeakerMute(e,t)},e.prototype.setListenOtherVoice=function(e,t){return r.setListenOtherVoice(e,t)},e.prototype.setLogLevel=function(e,t){return r.setLogLevel(e,t)},e.prototype.setServerRegion=function(e,t){r.setServerRegion(e,t)},e.prototype.setTestConfig=function(e){r.setTestConfig(e)},e.prototype.setServerIpPort=function(e,t){r.setServerIpPort(e,t)},e.prototype.setOutputToSpeaker=function(e){return r.setOutputToSpeaker(e)},e.prototype.setTranscriberEnabled=function(e){return r.setTranscriberEnabled(e)},e.prototype.setUseMobileNetworkEnabled=function(e){r.setUseMobileNetworkEnabled(e)},e.prototype.getUseMobileNetworkEnabled=function(){return r.getUseMobileNetworkEnabled()},e.prototype.setUserLogPath=function(e){return r.setUserLogPath(e)},e.prototype.playBackgroundMusic=function(e,t){return r.playBackgroundMusic(e,t)},e.prototype.pauseBackgroundMusic=function(){return r.pauseBackgroundMusic()},e.prototype.resumeBackgroundMusic=function(){return r.resumeBackgroundMusic()},e.prototype.stopBackgroundMusic=function(){return r.stopBackgroundMusic()},e.prototype.setBackgroundMusicVolume=function(e){return r.setBackgroundMusicVolume(e)},e.prototype.setHeadsetMonitorOn=function(e,t){return r.setHeadsetMonitorOn(e,t)},e.prototype.setReverbEnabled=function(e){return r.setReverbEnabled(e)},e.prototype.setVadCallbackEnabled=function(e){return r.setVadCallbackEnabled(e)},e.prototype.setMicLevelCallback=function(e){return r.setMicLevelCallback(e)},e.prototype.setFarendVoiceLevelCallback=function(e){return r.setFarendVoiceLevelCallback(e)},e.prototype.setReleaseMicWhenMute=function(e){return r.setReleaseMicWhenMute(e)},e.prototype.setRecordingTimeMs=function(e){r.setRecordingTimeMs(e)},e.prototype.setPlayingTimeMs=function(e){r.setPlayingTimeMs(e)},e.prototype.setServerMode=function(e){r.setServerMode(e)},e.prototype.requestRestApi=function(e,t,n){var i=o.alloc(o.types.ulonglong),s=r.requestRestApi(e,t,i);return 0!==s?(M(n)&&n(s),-1):(M(n)&&(v[o.deref(i)]=n),o.deref(i))},e.prototype.getChannelUserList=function(e,t,n){return r.getChannelUserList(e,t,n)},e.prototype.setUserRole=function(e){return r.setUserRole(e)},e.prototype.getUserRole=function(){return r.getUserRole()},e.prototype.isBackgroundMusicPlaying=function(){return r.isBackgroundMusicPlaying()},e.prototype.isInited=function(){return r.isInited()},e.prototype.isInChannel=function(e){return r.isInChannel(e)},e.prototype.sendMessage=function(e,t,n){var i=o.alloc(o.types.ulonglong),s=r.sendMessage(e,t,i);return 0!==s?(M(n)&&n(s),-1):(M(n)&&(y[o.deref(i)]=n),o.deref(i))},e.prototype.kickOtherFromChannel=function(e,t,n){return r.kickOtherFromChannel(e,t,n)},e.prototype.openVideoEncoder=function(e){return r.openVideoEncoder(e)},e.prototype.inputAudioFrame=function(e,t,n){return r.inputAudioFrame(e,t,n)},e.prototype.inputVideoFrame=function(e,t,n,o,i,s,u,a){return r.inputVideoFrame(e,t,n,o,i,s,u,a)},e.prototype.stopInputVideoFrame=function(){return r.stopInputVideoFrame()},e.prototype.setVideoFps=function(e){return r.setVideoFps(Math.floor(e))},e.prototype.setVideoFpsForSecond=function(e){return r.setVideoFpsForSecond(Math.floor(e))},e.prototype.switchCamera=function(){return r.switchCamera()},e.prototype.resetCamera=function(){return r.resetCamera()},e.prototype.setCaptureFrontCameraEnable=function(e){return r.setCaptureFrontCameraEnable(e)},e.prototype.setExternalInputSampleRate=function(e,t){return r.setExternalInputSampleRate(e,t)},e.prototype.setVideoCodeBitrate=function(e,t){r.setVideoCodeBitrate(Math.floor(e),Math.floor(t))},e.prototype.setVideoCodeBitrateForSecond=function(e,t){r.setVideoCodeBitrateForSecond(Math.floor(e),Math.floor(t))},e.prototype.setVideoNetResolutionForSecond=function(e,t){return r.setVideoNetResolutionForSecond(e,t)},e.prototype.getCurrentVideoCodeBitrate=function(){return r.getCurrentVideoCodeBitrate()},e.prototype.setVideoHardwareCodeEnable=function(e){r.setVideoHardwareCodeEnable(e)},e.prototype.getVideoHardwareCodeEnable=function(){return r.getVideoHardwareCodeEnable()},e.prototype.setVideoNoFrameTimeout=function(e){return r.setVideoNoFrameTimeout(e)},e.prototype.queryUsersVideoInfo=function(e){return r.queryUsersVideoInfo(e)},e.prototype.setLocalVideoPreviewMirror=function(e){r.setLocalVideoPreviewMirror(e)},e.prototype.setUsersVideoInfo=function(e){return r.setUsersVideoInfo(e)},e.prototype.openBeautify=function(e){return r.openBeautify(e)},e.prototype.beautifyChanged=function(e){return r.beautifyChanged(e)},e.prototype.releaseMicSync=function(){return r.releaseMicSync()},e.prototype.resumeMicSync=function(){return r.resumeMicSync()},e.prototype.bindUserToCanvas=function(e,t,n){void 0===n&&(n=window),r.bindUserToCanvas(e,t,n)},e.prototype.updateCanvas=function(e,t,n,o,i){return void 0===n&&(n=!1),void 0===i&&(i=.35),r.updateCanvas(e,t,n,o,i)},e.prototype.setVideoFpsForShare=function(e){return r.setVideoFpsForShare(Math.floor(e))},e.prototype.setVideoNetResolutionForShare=function(e,t){return r.setVideoNetResolutionForShare(e,t)},e.prototype.setVideoCodeBitrateForShare=function(e,t){r.setVideoCodeBitrateForShare(Math.floor(e),Math.floor(t))},e.prototype.setVBRForShare=function(e){return r.setVBRForShare(e)},e.prototype.setVideoNetAdjustmode=function(e){return r.setVideoNetAdjustmode(e)},e.prototype.setVBR=function(e){return r.setVBR(e)},e.prototype.setVBRForSecond=function(e){return r.setVBRForSecond(e)},e.prototype.setShareParameter=function(e,t,n){return r.setShareParameter(e,t,n)},e.prototype.startShareStream=function(e,t,n){return r.startShareStream(e,t,n)},e.prototype.stopShareStream=function(){return r.stopShareStream()},e.prototype.getRecordDeviceCount=function(){return r.getRecordDeviceCount()},e.prototype.setVideoPreviewFps=function(e){return r.setVideoPreviewFps(e)},e.prototype.getRecordDeviceInfo=function(e){return r.getRecordDeviceInfo(e)},e.prototype.setRecordDevice=function(e){r.setRecordDevice(e)},e.prototype.msSwitchAudioRecognition=function(e,t,n,o,i,s){void 0===o&&(o="94b40dbbfa1b4157bd7017385df4837e"),void 0===i&&(i="eastAsia"),void 0===s&&(s="https://eastasia.api.cognitive.microsoft.com/sts/v1.0/issuetoken"),r.msSwitchAudioRecognition(e,t,n,o,i,s)},e.prototype.checkSharePermission=function(){return r.checkSharePermission()},e.prototype.getWinList=function(){return r.getWinList()},e.prototype.setShareExclusiveWnd=function(e){return r.setShareExclusiveWnd(e)},e.prototype.getVideoOnUser=function(){return r.getVideoOnUser()},e.prototype.on=function(e,t){M(t)?r.emitter.on(e,t):i.YMLogUtils.LOGE("param error! sencond param should be a function!, please check your code")},e}();t.default=b,r.emitter.on("YOUME_EVENT_INIT_OK",(function(e){i.YMLogUtils.LOGI("INIT_OK",e),M(s)&&(s(e.errorcode,e),s=null)})),r.emitter.on("YOUME_EVENT_INIT_FAILED",(function(e){i.YMLogUtils.LOGI("INIT_FAILED",e),M(s)&&(s(e.errorcode,e),s=null)})),r.emitter.on("YOUME_EVENT_JOIN_OK",(function(e){i.YMLogUtils.LOGI("JOIN_OK",e),M(u)&&(u(e.errorcode,e),u=null)})),r.emitter.on("YOUME_EVENT_JOIN_FAILED",(function(e){i.YMLogUtils.LOGI("JOIN_FAILED",e),M(u)&&(u(e.errorcode,e),u=null)})),r.emitter.on("YOUME_EVENT_LEAVED_ALL",(function(e){i.YMLogUtils.LOGI("LEAVED_ALL",e),M(a)&&(a(e.errorcode,e),a=null)})),r.emitter.on("YOUME_EVENT_LOCAL_MIC_ON",(function(e){i.YMLogUtils.LOGI("LOCAL_MIC_ON",e),M(l)&&(l(e.errorcode,e),l=null)})),r.emitter.on("YOUME_EVENT_LOCAL_MIC_OFF",(function(e){i.YMLogUtils.LOGI("LOCAL_MIC_OFF",e),M(c)&&(c(e.errorcode,e),c=null)})),r.emitter.on("YOUME_EVENT_LOCAL_SPEAKER_ON",(function(e){i.YMLogUtils.LOGI("LOCAL_SPEAKER_ON",e),M(m)&&(m(e.errorcode,e),m=null)})),r.emitter.on("YOUME_EVENT_LOCAL_SPEAKER_OFF",(function(e){i.YMLogUtils.LOGI("LOCAL_SPEAKER_OFF",e),M(h)&&(h(e.errorcode,e),h=null)})),r.emitter.on("YOUME_EVENT_LOCAL_VIDEO_INPUT_START",(function(e){i.YMLogUtils.LOGI("VIDEO_INPUT_START",e),M(f)&&(f(e.errorcode,e),f=null)})),r.emitter.on("YOUME_EVENT_LOCAL_VIDEO_INPUT_STOP",(function(e){i.YMLogUtils.LOGI("VIDEO_INPUT_STOP",e),M(d)&&(d(e.errorcode,e),d=null)})),r.emitter.on("YOUME_EVENT_PAUSED",(function(e){i.YMLogUtils.LOGI("YOUME_EVENT_PAUSED",e),M(p)&&(p(e.errorcode,e),p=null)})),r.emitter.on("YOUME_EVENT_RESUMED",(function(e){i.YMLogUtils.LOGI("YOUME_EVENT_RESUMED",e),M(_)&&(_(e.errorcode,e),_=null)})),r.emitter.on("YOUME_EVENT_MASK_VIDEO_FOR_USER",(function(e){i.YMLogUtils.LOGI("MASK_VIDEO_FOR_USER",e),M(g[e.param])&&(g[e.param](e.errorcode,e),delete g[e.param])})),r.emitter.on("YOUME_EVENT_RESUME_VIDEO_FOR_USER",(function(e){i.YMLogUtils.LOGI("RESUME_VIDEO_FOR_USER",e),M(E[e.param])&&(E[e.param](e.errorcode,e),delete E[e.param])})),r.emitter.on("YOUME_EVENT_SEND_MESSAGE_RESULT",(function(e){i.YMLogUtils.LOGI("SEND_MESSAGE_RESULT",e),M(y[e.param])&&(y[e.param](e.errorcode,e),delete y[e.param])})),r.emitter.on("onRequestRestAPI",(function(e){i.YMLogUtils.LOGI("onRequestRestAPI",e),M(v[e.requestid])&&(v[e.requestid](e.errorcode,e),delete v[e.requestid])}))},function(e,t,n){"use strict";const r=n(24),o=n(13),i=n(25);var s=n(14),u=i.platform(),a=i.arch();const l=n(26),c=n(27),m=new(n(28)),h=n(29),f=n(40),d=n(7);var p=null,_=!1,g=!1,E={};let v=__dirname;if(console.warn(v),v.indexOf("app.asar")>-1){let e=v.substring(v.indexOf("app.asar")+8);v=v.substring(0,v.indexOf("app.asar")),v=l.join(v,e),console.warn("load sdk from:"+v)}var y=!1;let M="";if("win32"===u){var b=r.Library("kernel32",{SetDllDirectoryA:["bool",["string"]]});let e=null;if("x64"===a){e=l.join(v,"youme_voice_engine","x86-64");const t=c.encode(e,"gbk");b.SetDllDirectoryA(t)}else{e=l.join(v,"youme_voice_engine","x86");const t=c.encode(e,"gbk");b.SetDllDirectoryA(t)}M="youme_voice_engine",s.existsSync(l.join(e,"YoumeMSAudioRecognition.dll"))&&(console.warn("ms audio recognition sdk exist"),y="YoumeMSAudioRecognition")}else if("linux"===u)M="x64"===a?l.join(v,"youme_voice_engine","linux","x86-64","libyoume_voice_engine"):"arm64"===a?l.join(v,"youme_voice_engine","linux","arm64","libyoume_voice_engine"):l.join(v,"youme_voice_engine","linux","x86","libyoume_voice_engine");else{M=l.join(v,"youme_voice_engine","macos","youme_voice_engine_mac");let e=l.join(v,"youme_voice_engine","macos","YoumeMSAudioRecognition");s.existsSync(e+".dylib")&&(console.warn("ms audio recognition sdk exist"),y=e)}var T={youme_init:["int",["string","string","int","string"]],youme_setExternalInputMode:["void",["bool"]],youme_setAVStatisticInterval:["void",["int"]],youme_setVideoNetResolution:["int",["int","int"]],youme_setVideoLocalResolution:["int",["int","int"]],youme_getCbMessage2:["char *",[]],youme_freeCbMessage2:["void",["string"]],youme_joinChannelSingleMode:["int",["string","string","int","bool"]],youme_getSDKVersion:["int",[]],youme_leaveChannelAll:["int",[]],youme_setToken:["void",["string"]],youme_setAudioQuality:["void",["int"]],youme_unInit:["int",[]],youme_setVolume:["void",["int"]],youme_getVolume:["uint",[]],youme_setMicrophoneMute:["void",["bool"]],youme_getMicrophoneMute:["bool",[]],youme_getSpeakerMute:["bool",[]],youme_setSpeakerMute:["void",["bool"]],youme_setOtherSpeakerMute:["int",["string","bool"]],youme_setOtherMicMute:["int",["string","bool"]],youme_setListenOtherVoice:["int",["string","bool"]],youme_setLogLevel:["int",["int","int"]],youme_setServerRegion:["void",["int","string","bool"]],youme_startCapture:["int",[]],youme_stopCapture:["int",[]],youme_setTestConfig:["void",["int"]],youme_setOutputToSpeaker:["int",["bool"]],youme_setTranscriberEnabled:["int",["bool"]],youme_setAutoSendStatus:["void",["bool"]],youme_getUseMobileNetworkEnabled:["bool",[]],youme_setUseMobileNetworkEnabled:["void",["bool"]],youme_setUserLogPath:["int",["string"]],youme_playBackgroundMusic:["int",["string","bool"]],youme_pauseBackgroundMusic:["int",[]],youme_resumeBackgroundMusic:["int",[]],youme_stopBackgroundMusic:["int",[]],youme_setBackgroundMusicVolume:["int",["int"]],youme_setHeadsetMonitorOn:["int",["bool","bool"]],youme_setReverbEnabled:["int",["bool"]],youme_setVadCallbackEnabled:["int",["bool"]],youme_setMicLevelCallback:["int",["int"]],youme_setFarendVoiceLevelCallback:["int",["int"]],youme_setReleaseMicWhenMute:["int",["bool"]],youme_pauseChannel:["int",[]],youme_resumeChannel:["int",[]],youme_setRecordingTimeMs:["void",["uint"]],youme_setPlayingTimeMs:["void",["uint"]],youme_setServerMode:["void",["int"]],youme_requestRestApi:["int",["string","string",o.refType("int")]],youme_getChannelUserList:["int",["string","int","bool"]],youme_setUserRole:["int",["int"]],youme_getUserRole:["int",[]],youme_isBackgroundMusicPlaying:["bool",[]],youme_isInited:["bool",[]],youme_isInChannel:["bool",["string"]],youme_sendMessage:["int",["string","string",o.refType("int")]],youme_kickOtherFromChannel:["int",["string","string","int"]],youme_openVideoEncoder:["int",["string"]],youme_inputAudioFrame:["int",[o.refType("pointer"),"int","uint64"]],youme_inputVideoFrame:["int",[o.refType("pointer"),"int","int","int","int","int","int","uint64"]],youme_stopInputVideoFrame:["int",[]],youme_getVideoFrame:["char *",["string",o.refType("int"),o.refType("int"),o.refType("int")]],youme_setVideoCallback:["int",["string"]],youme_setVideoFps:["int",["int"]],youme_switchCamera:["int",[]],youme_resetCamera:["int",[]],youme_setCaptureFrontCameraEnable:["int",["bool"]],youme_maskVideoByUserId:["int",["string","bool"]],youme_setExternalInputSampleRate:["int",["int","int"]],youme_setVideoNetResolutionForSecond:["int",["int","int"]],youme_setVideoCodeBitrateForSecond:["void",["uint","uint"]],youme_setVideoCodeBitrate:["void",["uint","uint"]],youme_getCurrentVideoCodeBitrate:["uint",[]],youme_setVideoHardwareCodeEnable:["void",["bool"]],youme_getVideoHardwareCodeEnable:["bool",[]],youme_setVideoNoFrameTimeout:["void",["int"]],youme_queryUsersVideoInfo:["int",["string"]],youme_setUsersVideoInfo:["int",["string"]],youme_openBeautify:["int",["bool"]],youme_beautifyChanged:["int",["double"]],youme_releaseMicSync:["bool",[]],youme_resumeMicSync:["bool",[]],youme_setMixVideoSize:["void",["int","int"]],youme_getCameraCount:["int",[]],youme_getCameraName:["int",["int",o.refType(o.types.char)]],youme_setOpenCameraId:["int",["int"]],youme_getVideoFrameNew:["char *",["string",o.refType("int"),o.refType("int"),o.refType("int"),o.refType("int")]],youme_videoEngineModelEnabled:["void",["bool"]],youme_setVideoFrameCallback:["void",["pointer"]],youme_setVideoEventCallback:["void",["pointer"]],youme_setVideoFpsForShare:["int",["int"]],youme_setVideoFpsForSecond:["int",["int"]],youme_setVideoPreviewFps:["int",["int"]],youme_setVideoNetResolutionForShare:["int",["int","int"]],youme_setVideoCodeBitrateForShare:["void",["uint","uint"]],youme_setVBRForShare:["int",["int"]],youme_setVBR:["int",["int"]],youme_setVBRForSecond:["int",["int"]],youme_stopShareStream:["void",[]],youme_setVideoNetAdjustmode:["int",["int"]],youme_setServerIpPort:["void",["string","int"]],youme_getRecordDeviceCount:["int",[]],youme_getRecordDeviceInfo:["bool",["int",o.refType(o.types.char),o.refType(o.types.char)]],youme_setRecordDevice:["int",["string"]],youme_checkSharePermission:["int",[]],youme_setLocalVideoPreviewMirror:["void",["bool"]],youme_getWinList:["void",[o.refType(o.types.char)]],youme_setVideoSmooth:["void",["int"]],youme_setShareExclusiveWnd:["int",["int"]]};T.youme_startShareStream="win32"===u?"x64"===a?["int",["int","uint64","uint64"]]:["int",["int","uint","uint"]]:["int",["int","int"]],"linux"===u&&(delete T.youme_stopShareStream,delete T.youme_setVideoNetAdjustmode,delete T.youme_getWinList,delete T.youme_startShareStream,delete T.youme_getRecordDeviceCount,delete T.youme_getRecordDeviceInfo,delete T.youme_setRecordDevice,delete T.youme_setVideoSmooth);var V=r.Library(M,T),S=null;if(y)try{S=r.Library(y,{youme_ms_switchAudioRecognition:["void",["bool","string","string","string","string","string"]]})}catch(e){y=!1,S=null,console.warn("load msAudioRecognition failed.")}function O(e=!0,t){if(e===_||!g)if(e||!t)for(var n=V.youme_getCbMessage2();null!=n&&null!=n&&n.length>0;){try{const e=o.readCString(n);R(JSON.parse(e))}catch(e){console.error(e)}V.youme_freeCbMessage2(n),n=V.youme_getCbMessage2()}else try{R(JSON.parse(t))}catch(e){console.error(e)}}function R(e){var t=new Object,n=e.type;if(0===n){var r=e.event;switch(t.errorcode=e.error,t.channelid=e.channelid,t.param=e.param,r){case 0:m.emit("YOUME_EVENT_INIT_OK",t);break;case 1:m.emit("YOUME_EVENT_INIT_FAILED",t);break;case 2:m.emit("YOUME_EVENT_JOIN_OK",t);break;case 3:m.emit("YOUME_EVENT_JOIN_FAILED",t);break;case 5:m.emit("YOUME_EVENT_LEAVED_ALL",t);break;case 6:m.emit("YOUME_EVENT_PAUSED",t);break;case 7:m.emit("YOUME_EVENT_RESUMED",t);break;case 10:m.emit("YOUME_EVENT_RECONNECTING",t);break;case 11:m.emit("YOUME_EVENT_RECONNECTED",t);break;case 12:m.emit("YOUME_EVENT_REC_PERMISSION_STATUS",t);break;case 13:m.emit("YOUME_EVENT_BGM_STOPPED",t);break;case 14:m.emit("YOUME_EVENT_BGM_FAILED",t);break;case 16:m.emit("YOUME_EVENT_OTHERS_MIC_ON",t);break;case 17:m.emit("YOUME_EVENT_OTHERS_MIC_OFF",t);break;case 18:m.emit("YOUME_EVENT_OTHERS_SPEAKER_ON",t);break;case 19:m.emit("YOUME_EVENT_OTHERS_SPEAKER_OFF",t);break;case 20:m.emit("YOUME_EVENT_OTHERS_VOICE_ON",t);break;case 21:m.emit("YOUME_EVENT_OTHERS_VOICE_OFF",t);break;case 22:m.emit("YOUME_EVENT_MY_MIC_LEVEL",t);break;case 23:m.emit("YOUME_EVENT_MIC_CTR_ON",t);break;case 24:m.emit("YOUME_EVENT_MIC_CTR_OFF",t);break;case 25:m.emit("YOUME_EVENT_SPEAKER_CTR_ON",t);break;case 26:m.emit("YOUME_EVENT_SPEAKER_CTR_OFF",t);break;case 27:m.emit("YOUME_EVENT_LISTEN_OTHER_ON",t);break;case 28:m.emit("YOUME_EVENT_LISTEN_OTHER_OFF",t);break;case 29:m.emit("YOUME_EVENT_LOCAL_MIC_ON",t);break;case 30:m.emit("YOUME_EVENT_LOCAL_MIC_OFF",t);break;case 31:m.emit("YOUME_EVENT_LOCAL_SPEAKER_ON",t);break;case 32:m.emit("YOUME_EVENT_LOCAL_SPEAKER_OFF",t);break;case 60:m.emit("YOUME_EVENT_SEND_MESSAGE_RESULT",t);break;case 61:m.emit("YOUME_EVENT_MESSAGE_NOTIFY",t);break;case 64:m.emit("YOUME_EVENT_KICK_RESULT",t);break;case 65:m.emit("YOUME_EVENT_KICK_NOTIFY",t);break;case 66:m.emit("YOUME_EVENT_FAREND_VOICE_LEVEL",t);break;case 67:m.emit("YOUME_EVENT_OTHERS_BE_KICKED",t);break;case 200:E[t.param]=!0,m.emit("YOUME_EVENT_OTHERS_VIDEO_ON",t);break;case 204:m.emit("YOUME_EVENT_MASK_VIDEO_BY_OTHER_USER",t);break;case 205:m.emit("YOUME_EVENT_RESUME_VIDEO_BY_OTHER_USER",t);break;case 206:m.emit("YOUME_EVENT_MASK_VIDEO_FOR_USER",t);break;case 207:m.emit("YOUME_EVENT_RESUME_VIDEO_FOR_USER",t);break;case 208:m.emit("YOUME_EVENT_OTHERS_VIDEO_SHUT_DOWN",t);break;case 209:E[t.param]=!0,m.emit("YOUME_EVENT_OTHERS_VIDEO_INPUT_START",t);break;case 210:delete E[t.param],m.emit("YOUME_EVENT_OTHERS_VIDEO_INPUT_STOP",t);break;case 211:m.emit("YOUME_EVENT_MEDIA_DATA_ROAD_PASS",t);break;case 212:m.emit("YOUME_EVENT_MEDIA_DATA_ROAD_BLOCK",t);break;case 213:m.emit("YOUME_EVENT_QUERY_USERS_VIDEO_INFO",t);break;case 214:m.emit("YOUME_EVENT_SET_USERS_VIDEO_INFO",t);break;case 215:E[t.param]=!0,m.emit("YOUME_EVENT_LOCAL_VIDEO_INPUT_START",t);break;case 216:m.emit("YOUME_EVENT_LOCAL_VIDEO_INPUT_STOP",t);break;case 221:m.emit("YOUME_EVENT_LOCAL_SHARE_INPUT_START",t);break;case 222:m.emit("YOUME_EVENT_LOCAL_SHARE_INPUT_STOP",t);break;case 223:E[t.param]=!0,m.emit("YOUME_EVENT_OTHERS_SHARE_INPUT_START",t);break;case 224:delete E[t.param],m.emit("YOUME_EVENT_OTHERS_SHARE_INPUT_STOP",t);break;case 300:m.emit("YOUME_EVENT_OTHERS_DATA_ERROR",t);break;case 301:m.emit("YOUME_EVENT_OTHERS_NETWORK_BAD",t);break;case 302:m.emit("YOUME_EVENT_OTHERS_BLACK_FULL",t);break;case 303:m.emit("YOUME_EVENT_OTHERS_GREEN_FULL",t);break;case 304:m.emit("YOUME_EVENT_OTHERS_BLACK_BORDER",t);break;case 305:m.emit("YOUME_EVENT_OTHERS_GREEN_BORDER",t);break;case 306:m.emit("YOUME_EVENT_OTHERS_BLURRED_SCREEN",t);break;case 307:m.emit("YOUME_EVENT_OTHERS_ENCODER_ERROR",t);break;case 308:m.emit("YOUME_EVENT_OTHERS_DECODER_ERROR",t);break;case 400:m.emit("YOUME_EVENT_CAMERA_DEVICE_CONNECT",t);break;case 401:m.emit("YOUME_EVENT_CAMERA_DEVICE_DISCONNECT",t);break;case 500:m.emit("YOUME_EVENT_RECOGNIZE_MODULE_INIT_START",t);break;case 501:m.emit("YOUME_EVENT_RECOGNIZE_MODULE_INIT_END",t);break;case 502:m.emit("YOUME_EVENT_RECOGNIZE_MODULE_UNINIT",t);break;case 503:m.emit("YOUME_EVENT_RECOGNIZE_MODULE_ERR",t);break;case 725:case 725:m.emit("YOUME_EVENT_LOCAL_SHARE_WINDOW_CLOSED",t);break;case 726:m.emit("YOUME_EVENT_LOCAL_SHARE_WINDOW_INVSIABLE",t);break;case 727:m.emit("YOUME_EVENT_LOCAL_SHARE_WINDOW_ISICONIC",t);break;case 728:m.emit("YOUME_EVENT_LOCAL_SHARE_WINDOW_NORMAL",t)}}else 1===n?(t.requestid=e.requestid,t.errorcode=e.error,t.query=e.query,t.result=e.result,m.emit("onRequestRestAPI",t)):2===n?(t.channelid=e.channelid,t.isUpdate=e.isUpdate,t.memchange=e.memchange,m.emit("onMemberChange",t)):3===n?(t.bc=e.bc,t.channelid=e.channelid,t.param1=e.param1,t.param2=e.param2,t.content=e.content,m.emit("onBroadcast",t)):4===n?(t.avtype=e.avtype,t.userid=e.userid,t.value=e.value,m.emit("onAVStatistic",t)):5===n?(t.type=e.type,t.userid=e.userid,t.sentenceIndex=e.sentence_index,m.emit("onSentenceBegin",t)):6===n?(t.type=e.type,t.userid=e.userid,t.sentenceIndex=e.sentence_index,t.result=e.result,t.transLang=e.transLang,t.transResult=e.transResult,m.emit("onSentenceChange",t)):7===n&&(t.type=e.type,t.userid=e.userid,t.sentenceIndex=e.sentence_index,t.result=e.result,t.transLang=e.transLang,t.transResult=e.transResult,m.emit("onSentenceEnd",t))}var C=null;function x(e,t,n,r,i,s){const u=F[e];for(let a in u)a&&P.splice(0,0,{userId:e,len:n,width:r,height:i,fmt:s,canvasId:a,data:o.reinterpret(t,n)})}function I(e){if((g=!!e)&&!window._ym_video_register){if(window._ym_video_cb&&window._ym_video_event_cb)return console.log("resume youme video and event callback"),V.youme_setVideoFrameCallback(window._ym_video_cb),V.youme_setVideoEventCallback(window._ym_video_event_cb),window._ym_video_register=!0,void(_=!1);(p=r.Callback(o.types.void,["string"],e=>{O(!1,e)}))&&(console.log("registering youme video event callback"),V.youme_setVideoEventCallback(p)),window._ym_video_event_cb=p;let e=r.Callback(o.types.void,["string","char *","int","int","int","int"],x);console.log("registering youme video callback"),e&&V.youme_setVideoFrameCallback(e),_=!1,window._ym_video_cb=e,window._ym_video_register=!0}else window._ym_video_register=!0,_=!1}let U={},N={},F={},A={},w=[],L=0,k=0,P=[];function D(){if(window.document.hidden&&window._ym_video_timer_started){const e=w.find(e=>!e.document.hidden);e&&(clearInterval(L),cancelAnimationFrame(k),window._ym_video_timer_started=!1,window._ym_video_animation_started=!1,L=e.setInterval(D,33),k=e.requestAnimationFrame(B(e)),e._ym_video_timer_started=!0,e._ym_video_animation_started=!0,console.log("====================>启动到从window"))}if(_)for(let e in F)q(e,Object.keys(F[e]))}function B(e){return function(){if(g&&!_){for(let e=P.length-1;e>-1;e--)Y(P[e]);P=[]}else if(!g&&!_)for(let e in F)q(e,Object.keys(F[e]));e.requestAnimationFrame(B(e))}}function Y(e){const t=e.canvasId,n=e.width,r=e.height,o=e.fmt,i=e.data,s=A[t];let u=N[t];if(u||(u=s?s.document.getElementById(t):null),!u)return;const a=new Uint8Array(i),l=U[u.id];if(void 0!==l)l.fmt===o?l.decode(a,n,r)||(console.error("remove invalid canvas id:"+u.id),z(u.id)):G(u,o);else{const e=G(u,o);e&&e.fmt===o&&(e.decode(a,n,r)||(console.error("remove invalid canvas id:"+u.id),z(u.id)))}}function q(e,t,n=!1,r=.35){if(!_&&g)return;if(void 0===E[e])return;var i=o.alloc("int",0),s=o.alloc("int",12),u=o.alloc("int",12),a=o.alloc("int",1);const l=V.youme_getVideoFrameNew(e,i,s,u,a);for(let e of t){const t=A[e];if(!(l.length>0))break;{var c;if(c=N[e]){var m=t?t.document.getElementById(e):NaN;m!=c&&(console.warn("remove invalid canvas cache"),N[e+""]&&delete N[e+""],delete U[c.id],delete A[c.id],m&&(c=m,N[e]=c,A[e]=t))}else{if(!(c=t?t.document.getElementById(e):null))continue;N[e]=c}if(c.ownerDocument.hidden)continue;const d=i.deref(),p=o.deref(s),_=o.deref(u),g=o.deref(a);if(n)if("best"===n){var h=c.getBoundingClientRect(),f=h.width/h.height;Math.abs(p/_-f)>r?c.style.objectFit="contain":c.style.objectFit="cover"}else c.style.objectFit=n;const E=o.reinterpret(l,d),v=new Uint8Array(E),y=U[c.id];if(void 0!==y)y.fmt===g?y.decode(v,p,_)||(console.error("remove invalid canvas id:"+c.id),z(c.id)):G(c,g);else{const e=G(c,g);e&&e.fmt===g&&(e.decode(v,p,_)||(console.error("remove invalid canvas id:"+c.id),z(c.id)))}}}}function G(e,t){return 0===t?(U[e.id]=new f(e,new d(e.width,e.height)),U[e.id]):1===t&&(U[e.id]=new h(e,new d(e.width,e.height)),U[e.id])}function z(e){console.log("removeCanvasBind:"+e);const t=A[e];var n=t?t.document.getElementById(e):null;for(let t in F)for(let n in F[t])n===e&&(delete F[t][e],delete A[e]);N[e+""]&&(delete N[e+""],delete A[e]);let r=U[e];if(r&&delete U[e],null==n)return console.warn("not found canvas object by id:"+e+" did not destroy gl context"),void(r&&r.clear());r&&r.destroy()}clearInterval(L),L=setInterval(D,33),window._ym_video_timer_started=!0,cancelAnimationFrame(k),k=requestAnimationFrame(B(window)),window._ym_video_animation_started=!0,window.document.addEventListener("visibilitychange",e=>{if(!window.document.hidden){const e=w.find(e=>e._ym_video_animation_started&&e._ym_video_timer_started);e&&(e.clearInterval(L),e.cancelAnimationFrame(k),e._ym_video_animation_started=!1,e._ym_video_timer_started=!1,L=setInterval(D,33),k=requestAnimationFrame(B(window)),window._ym_video_animation_started=!0,window._ym_video_timer_started=!0,console.log("=============================>恢复到主window"))}},!1),e.exports={startGetMsg:function(){C&&clearInterval(C),C=setInterval(()=>{O(!0)},33),I(),process.on("exit",(function(){window._ym_video_cb=null,window._ym_video_event_cb=null}))},emitter:m,init:function(e,t,n,r){return V.youme_init(e,t,n,r)},joinChannelSingleMode:function(e,t,n,r){return E[e]=!0,V.youme_joinChannelSingleMode(e,t,n,r)},setExternalInputMode:function(e){V.youme_setExternalInputMode(e)},setAVStatisticInterval:function(e){V.youme_setAVStatisticInterval(e)},setVideoNetResolution:function(e,t){return V.youme_setVideoNetResolution(e,t)},setVideoLocalResolution:function(e,t){return V.youme_setVideoLocalResolution(e,t)},getSDKVersion:function(){return V.youme_getSDKVersion()},unInit:function(){return C&&clearInterval(C),V.youme_unInit()},setVolume:function(e){V.youme_setVolume(e)},getVolume:function(){return V.youme_getVolume()},setMicrophoneMute:function(e){V.youme_setMicrophoneMute(e)},getMicrophoneMute:function(){return V.youme_getMicrophoneMute()},getSpeakerMute:function(){return V.youme_getSpeakerMute()},setSpeakerMute:function(e){V.youme_setSpeakerMute(e)},setOtherMicMute:function(e,t){return V.youme_setOtherMicMute(e,t)},setOtherSpeakerMute:function(e,t){return V.youme_setOtherSpeakerMute(e,t)},setListenOtherVoice:function(e,t){return V.youme_setListenOtherVoice(e,t)},setLogLevel:function(e,t){return V.youme_setLogLevel(e,t)},setServerRegion:function(e,t){V.youme_setServerRegion(e,t)},stopCapture:function(){return V.youme_stopCapture()},startCapture:function(){return V.youme_startCapture()},setTestConfig:function(e){V.youme_setTestConfig(e)},setOutputToSpeaker:function(e){return V.youme_setOutputToSpeaker(e)},setTranscriberEnabled:function(e){return V.youme_setTranscriberEnabled(e)},setUseMobileNetworkEnabled:function(e){V.youme_setUseMobileNetworkEnabled(e)},getUseMobileNetworkEnabled:function(){return V.youme_getUseMobileNetworkEnabled()},setUserLogPath:function(e){return V.youme_setUserLogPath(e)},playBackgroundMusic:function(e,t){return V.youme_playBackgroundMusic(e,t)},pauseBackgroundMusic:function(){return V.youme_pauseBackgroundMusic()},resumeBackgroundMusic:function(){return V.youme_resumeBackgroundMusic()},stopBackgroundMusic:function(){return V.youme_stopBackgroundMusic()},setBackgroundMusicVolume:function(e){return V.youme_setBackgroundMusicVolume(e)},setHeadsetMonitorOn:function(e,t){return V.youme_setHeadsetMonitorOn(e,t)},setReverbEnabled:function(e){return V.youme_setReverbEnabled(e)},setVadCallbackEnabled:function(e){return V.youme_setVadCallbackEnabled(e)},setMicLevelCallback:function(e){return V.youme_setMicLevelCallback(e)},setFarendVoiceLevelCallback:function(e){return V.youme_setFarendVoiceLevelCallback(e)},setReleaseMicWhenMute:function(e){return V.youme_setReleaseMicWhenMute(e)},pauseChannel:function(){return V.youme_pauseChannel()},resumeChannel:function(){return V.youme_resumeChannel()},setRecordingTimeMs:function(e){V.youme_setRecordingTimeMs(e)},setPlayingTimeMs:function(e){V.youme_setPlayingTimeMs(e)},requestRestApi:function(e,t,n){return V.youme_requestRestApi(e,t,n)},getChannelUserList:function(e,t,n){return V.youme_getChannelUserList(e,t,n)},setUserRole:function(e){return V.youme_setUserRole(e)},getUserRole:function(){return V.youme_getUserRole()},isBackgroundMusicPlaying:function(){return V.youme_isBackgroundMusicPlaying()},isInited:function(){return V.youme_isInited()},isInChannel:function(e){return V.youme_isInChannel(e)},sendMessage:function(e,t,n){return V.youme_sendMessage(e,t,n)},inputAudioFrame:function(e,t,n){return V.youme_inputAudioFrame(e,t,n)},inputVideoFrame:function(e,t,n,r,o,i,s,u){return V.youme_inputVideoFrame(e,t,n,r,o,i,s,u)},getVideoFrame:function(e,t,n,r){return V.youme_getVideoFrame(e,t,n,r)},setVideoCallback:function(){return V.youme_setVideoCallback("")},setVideoFps:function(e){return V.youme_setVideoFps(e)},switchCamera:function(){return V.youme_switchCamera()},setExternalInputSampleRate:function(e,t){return V.youme_setExternalInputSampleRate(e,t)},setVideoNetResolutionForSecond:function(e,t){return V.youme_setVideoNetResolutionForSecond(e,t)},setVideoCodeBitrateForSecond:function(e,t){V.youme_setVideoCodeBitrateForSecond(e,t)},getCurrentVideoCodeBitrate:function(){return V.youme_getCurrentVideoCodeBitrate()},setVideoHardwareCodeEnable:function(e){V.youme_setVideoHardwareCodeEnable(e)},getVideoHardwareCodeEnable:function(){return V.youme_getVideoHardwareCodeEnable()},setVideoNoFrameTimeout:function(e){return V.youme_setVideoNoFrameTimeout(e)},queryUsersVideoInfo:function(e){return V.youme_queryUsersVideoInfo(e)},setUsersVideoInfo:function(e){return V.youme_setUsersVideoInfo(e)},openBeautify:function(e){return V.youme_openBeautify(e)},beautifyChanged:function(e){return V.youme_beautifyChanged(e)},releaseMicSync:function(){return V.youme_releaseMicSync()},resumeMicSync:function(){return V.youme_resumeMicSync()},setToken:function(e){V.youme_setToken(e)},setAudioQuality:function(e){V.youme_setAudioQuality(e)},stopInputVideoFrame:function(){return V.youme_stopInputVideoFrame()},leaveChannelAll:function(){return U={},E={},V.youme_leaveChannelAll()},setAutoSendStatus:function(e){V.youme_setAutoSendStatus(e)},setServerMode:function(e){V.youme_setServerMode(e)},kickOtherFromChannel:function(e,t,n){return V.youme_kickOtherFromChannel(e,t,n)},openVideoEncoder:function(e){return V.youme_openVideoEncoder(e)},resetCamera:function(){return V.youme_resetCamera()},setCaptureFrontCameraEnable:function(e){return V.youme_setCaptureFrontCameraEnable(e)},maskVideoByUserId:function(e,t){return V.youme_maskVideoByUserId(e,t)},setMixVideoSize:function(e,t){V.youme_setMixVideoSize(e,t)},getCameraCount:function(){return V.youme_getCameraCount()},getCameraName:function(e){var t=Buffer.alloc(1024);t.type=o.types.CString;var n=V.youme_getCameraName(e,t);return t.slice(0,n).toString()},setOpenCameraId:function(e){return V.youme_setOpenCameraId(e)},getVideoFrameNew:function(e,t,n,r,o){return V.youme_getVideoFrameNew(e,t,n,r,o)},videoEngineModelEnabled:function(e){V.youme_videoEngineModelEnabled(e)},updateCanvas:q,removeCanvasBind:z,setVideoFpsForShare:function(e){return V.youme_setVideoFpsForShare(e)},setVideoNetResolutionForShare:function(e,t){return V.youme_setVideoNetResolutionForShare(e,t)},setVideoCodeBitrateForShare:function(e,t){V.youme_setVideoCodeBitrateForShare(e,t)},setVBRForShare:function(e){return V.youme_setVBRForShare(e?1:0)},setShareParameter:function(e,t,n){},startShareStream:function(e,t,n){return"win32"===u?V.youme_startShareStream(e,t,n):V.youme_startShareStream(e,t)},stopShareStream:function(){try{V.youme_stopShareStream()}catch(e){console.warn(e.toString())}},bindUserToCanvas:function(e,t,n){console.log("bindUserToCanvas:",t),F[e]?F[e][t]=t:F[e]={[t]:t},w.find(e=>e===n)||w.push(n),A[t]=n},setVBR:function(e){return V.youme_setVBR(e?1:0)},setVBRForSecond:function(e){return V.youme_setVBRForSecond(e?1:0)},setVideoNetAdjustmode:function(e){try{return V.youme_setVideoNetAdjustmode(e)}catch(e){console.warn(e.toString())}},setVideoCodeBitrate:function(e,t){V.youme_setVideoCodeBitrate(e,t)},setVideoFpsForSecond:function(e){return V.youme_setVideoFpsForSecond(e)},registerVideoCallback:I,unRegisterVideoCallback:function(){console.log("unRegister youme video callback"),g&&(V.youme_setVideoEventCallback(null),V.youme_setVideoFrameCallback(null)),window._ym_video_register=!1,_=!0},setServerIpPort:function(e,t){V.youme_setServerIpPort(e,t)},getRecordDeviceCount:function(){try{return V.youme_getRecordDeviceCount()}catch(e){return console.warn(e.toString()),0}},getRecordDeviceInfo:function(e){try{var t=Buffer.alloc(1024);t.type=o.types.CString;var n=Buffer.alloc(1024);return t.type=o.types.CString,V.youme_getRecordDeviceInfo(e,t,n),{deviceName:o.readCString(t,0),deviceUid:o.readCString(n)}}catch(e){return console.warn(e.toString()),{deviceName:"",deviceUid:""}}},setRecordDevice:function(e){try{V.youme_setRecordDevice(e)}catch(e){console.warn(e.toString())}},msSwitchAudioRecognition:function(e,t,n,r,o,i){S&&S.youme_ms_switchAudioRecognition(e,t,n,r,o,i)},setVideoPreviewFps:function(e){return V.youme_setVideoPreviewFps(e)},checkSharePermission:function(){return V.youme_checkSharePermission()},getVideoOnUser:function(){return E},setLocalVideoPreviewMirror:function(e){V.youme_setLocalVideoPreviewMirror(!!e)},getWinList:function(){try{var e=Buffer.alloc(10240);return e.type=o.types.CString,V.youme_getWinList(e),o.readCString(e,0)}catch(e){return console.warn(e.toString()),null}},setShareExclusiveWnd:function(e){return V.youme_setShareExclusiveWnd(e)},setVideoSmooth:function(e){V.youme_setVideoSmooth(e?1:0)}}},function(e,t){e.exports=require("ffi-napi")},function(e,t){e.exports=require("os")},function(e,t){e.exports=require("path")},function(e,t){e.exports=require("iconv-lite")},function(e,t){e.exports=require("events")},function(e,t,n){"use strict";var r=n(15),o=n(7),i=n(16),s=n(17),u=n(8),a=n(18),l=n(11),c=u.createFromSource("x-shader/x-vertex","   attribute vec3 aVertexPosition;   attribute vec2 aTextureCoord;   uniform mat4 uMVMatrix;   uniform mat4 uPMatrix;   varying lowp vec2 vTextureCoord;   void main(void) {     gl_Position = uPMatrix * uMVMatrix * vec4(aVertexPosition, 1.0);     vTextureCoord = aTextureCoord;   } "),m=u.createFromSource("x-shader/x-fragment","   precision lowp float;   varying lowp vec2 vTextureCoord;   uniform sampler2D texture;   void main(void) {     gl_FragColor = texture2D(texture, vTextureCoord).bgra;   } "),h=new l({Extends:a,Binds:["decode"],initialize:function(e,t){this.canvas=e,this.canvas.width=t.w,this.canvas.height=t.h,this.fmt=1},resize:function(e){this.size&&this.size.w===e.w&&this.size.h===e.h||h.parent.initialize.call(this,this.canvas,e)},onInitShaders:function(){this.program=new r(this.gl),this.program.attach(new i(this.gl,c)),this.program.attach(new i(this.gl,m)),this.program.link(),this.program.use(),this.vertexPositionAttribute=this.program.getAttributeLocation("aVertexPosition"),this.gl.enableVertexAttribArray(this.vertexPositionAttribute),this.textureCoordAttribute=this.program.getAttributeLocation("aTextureCoord"),this.gl.enableVertexAttribArray(this.textureCoordAttribute)},onInitTextures:function(){var e=this.gl;this.texture=new s(e,this.size,e.RGBA)},onInitSceneTextures:function(){this.texture.bind(0,this.program,"texture")},fillBGRATextures:function(e){this.texture.fill(e)},decode:function(e,t,n){if(!e)return console.error("decode buffer is null"),!1;if(this.resize(new o(t,n)),!this.texture)return console.error("this.YTexture is null or undefined"),!1;var r=t*n*4;return this.texture.fill(e.subarray(0,r)),this.drawScene(),!0},toString:function(){return"BRGACanvas Size: "+this.size},destroy:function(){try{if(this.gl){let e=this.gl.getExtension("WEBGL_lose_context");e&&e.loseContext()}}catch(e){console.warn(e)}},clear:function(){this.gl&&(this.gl.clearColor(0,0,0,1),this.gl.clear(this.gl.COLOR_BUFFER_BIT))}});e.exports=h},function(e,t,n){"use strict";var r=n(9).Matrix,o=n(9).Vector,i=r.create;r.Translation=function(e){var t;if(2==e.elements.length)return(t=r.I(3)).elements[2][0]=e.elements[0],t.elements[2][1]=e.elements[1],t;if(3==e.elements.length)return(t=r.I(4)).elements[0][3]=e.elements[0],t.elements[1][3]=e.elements[1],t.elements[2][3]=e.elements[2],t;throw"Invalid length for Translation"},r.prototype.flatten=function(){var e=[];if(0==this.elements.length)return[];for(var t=0;t<this.elements[0].length;t++)for(var n=0;n<this.elements.length;n++)e.push(this.elements[n][t]);return e},r.prototype.ensure4x4=function(){if(4==this.elements.length&&4==this.elements[0].length)return this;if(this.elements.length>4||this.elements[0].length>4)return null;for(var e=0;e<this.elements.length;e++)for(var t=this.elements[e].length;t<4;t++)e==t?this.elements[e].push(1):this.elements[e].push(0);for(e=this.elements.length;e<4;e++)0==e?this.elements.push([1,0,0,0]):1==e?this.elements.push([0,1,0,0]):2==e?this.elements.push([0,0,1,0]):3==e&&this.elements.push([0,0,0,1]);return this},o.prototype.flatten=function(){return this.elements},e.exports.makePerspective=function(e,t,n,r){var o=n*Math.tan(e*Math.PI/360),s=-o;return function(e,t,n,r,o,s){return i([[2*o/(t-e),0,(t+e)/(t-e),0],[0,2*o/(r-n),(r+n)/(r-n),0],[0,0,-(s+o)/(s-o),-2*s*o/(s-o)],[0,0,-1,0]])}(s*t,o*t,s,o,n,r)}},function(e,t,n){var r=n(10),o=n(0);r.Segment=function(){},r.Segment.prototype={eql:function(e){return this.start.eql(e.start)&&this.end.eql(e.end)||this.start.eql(e.end)&&this.end.eql(e.start)},dup:function(){return r.Segment.create(this.start,this.end)},length:function(){var e=this.start.elements,t=this.end.elements,n=t[0]-e[0],r=t[1]-e[1],o=t[2]-e[2];return Math.sqrt(n*n+r*r+o*o)},toVector:function(){var e=this.start.elements,t=this.end.elements;return o.create([t[0]-e[0],t[1]-e[1],t[2]-e[2]])},midpoint:function(){var e=this.start.elements,t=this.end.elements;return o.create([(t[0]+e[0])/2,(t[1]+e[1])/2,(t[2]+e[2])/2])},bisectingPlane:function(){return Plane.create(this.midpoint(),this.toVector())},translate:function(e){var t=e.elements||e,n=this.start.elements,o=this.end.elements;return r.Segment.create([n[0]+t[0],n[1]+t[1],n[2]+(t[2]||0)],[o[0]+t[0],o[1]+t[1],o[2]+(t[2]||0)])},isParallelTo:function(e){return this.line.isParallelTo(e)},distanceFrom:function(e){var t=this.pointClosestTo(e);return null===t?null:t.distanceFrom(e)},contains:function(e){if(e.start&&e.end)return this.contains(e.start)&&this.contains(e.end);var t=(e.elements||e).slice();if(2==t.length&&t.push(0),this.start.eql(t))return!0;var n=this.start.elements,r=o.create([n[0]-t[0],n[1]-t[1],n[2]-(t[2]||0)]),i=this.toVector();return r.isAntiparallelTo(i)&&r.modulus()<=i.modulus()},intersects:function(e){return null!==this.intersectionWith(e)},intersectionWith:function(e){if(!this.line.intersects(e))return null;var t=this.line.intersectionWith(e);return this.contains(t)?t:null},pointClosestTo:function(e){if(e.normal){var t=this.line.intersectionWith(e);return null===t?null:this.pointClosestTo(t)}var n=this.line.pointClosestTo(e);return null===n?null:this.contains(n)?n:(this.line.positionOf(n)<0?this.start:this.end).dup()},setPoints:function(e,t){return e=o.create(e).to3D(),t=o.create(t).to3D(),null===e||null===t?null:(this.line=r.create(e,t.subtract(e)),this.start=e,this.end=t,this)}},r.Segment.create=function(e,t){return(new r.Segment).setPoints(e,t)},e.exports=r.Segment},function(e,t,n){var r=n(12);e.exports=function(e,t){function n(){}return n.prototype=e,r(new n,t)}},function(e,t,n){var r,o,i=n(3);function s(e,t,n,r){return e.call(r,t[n],n,t)}e.exports=function(e,t,n){var u,a=0;for(u in null==r&&function(){for(var e in o=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],r=!0,{toString:null})r=!1}(),e)if(!1===s(t,e,u,n))break;if(r)for(var l=e.constructor,c=!!l&&e===l.prototype;(u=o[a++])&&("constructor"===u&&(c||!i(e,u))||e[u]===Object.prototype[u]||!1!==s(t,e,u,n)););}},function(e,t,n){var r=n(3),o=n(35),i=n(37);e.exports=function e(){var t,n,s,u,a=1;for(u=o(arguments[0]);s=arguments[a++];)for(t in s)r(s,t)&&(n=s[t],i(n)&&i(u[t])?u[t]=e(u[t],n):u[t]=o(n));return u}},function(e,t,n){var r=n(36),o=n(20),i=n(4),s=n(21);e.exports=function e(t,n){switch(i(t)){case"Object":return function(t,n){if(s(t)){var r={};return o(t,(function(t,r){this[r]=e(t,n)}),r),r}return n?n(t):t}(t,n);case"Array":return function(t,n){for(var r=[],o=-1,i=t.length;++o<i;)r[o]=e(t[o],n);return r}(t,n);default:return r(t)}}},function(e,t,n){var r=n(4),o=n(21),i=n(12);e.exports=function(e){switch(r(e)){case"Object":return function(e){return o(e)?i({},e):e}(e);case"Array":return function(e){return e.slice()}(e);case"RegExp":return function(e){var t="";return t+=e.multiline?"m":"",t+=e.global?"g":"",t+=e.ignoreCase?"i":"",new RegExp(e.source,t)}(e);case"Date":return function(e){return new Date(+e)}(e);default:return e}}},function(e,t,n){var r=n(38);e.exports=function(e){return r(e,"Object")}},function(e,t,n){var r=n(4);e.exports=function(e,t){return r(e)===t}},function(e,t,n){"use strict";var r=/^Implements|Extends|Binds$/;e.exports=function(e,t){for(var n in t)n.match(r)||("function"==typeof t[n]&&t[n].$static?e[n]=t[n]:e.prototype[n]=t[n]);return e}},function(e,t,n){"use strict";var r=n(15),o=n(7),i=n(16),s=n(17),u=n(8),a=n(18),l=n(11),c=u.createFromSource("x-shader/x-vertex","\n  attribute vec3 aVertexPosition;\n  attribute vec2 aTextureCoord;\n  uniform mat4 uMVMatrix;\n  uniform mat4 uPMatrix;\n  varying lowp vec2 vTextureCoord;\n  void main(void) {\n    gl_Position = uPMatrix * uMVMatrix * vec4(aVertexPosition, 1.0);\n    vTextureCoord = aTextureCoord;\n  }\n"),m=u.createFromSource("x-shader/x-fragment","\n  precision lowp float;\n  varying lowp vec2 vTextureCoord;\n  uniform sampler2D YTexture;\n  uniform sampler2D UTexture;\n  uniform sampler2D VTexture;\n  const mat4 YUV2RGB = mat4\n  (\n   1.1643828125, 0, 1.59602734375, -.87078515625,\n   1.1643828125, -.39176171875, -.81296875, .52959375,\n   1.1643828125, 2.017234375, 0, -1.081390625,\n   0, 0, 0, 1\n  );\n\n  void main(void) {\n   gl_FragColor = vec4( texture2D(YTexture,  vTextureCoord).x, texture2D(UTexture, vTextureCoord).x, texture2D(VTexture, vTextureCoord).x, 1) * YUV2RGB;\n  }\n"),h=new l({Extends:a,Binds:["decode"],initialize:function(e,t){this.canvas=e,this.canvas.width=t.w,this.canvas.height=t.h,this.fmt=0},resize:function(e){this.size&&this.size.w===e.w&&this.size.h===e.h||h.parent.initialize.call(this,this.canvas,e)},onInitShaders:function(){this.program=new r(this.gl),this.program.attach(new i(this.gl,c)),this.program.attach(new i(this.gl,m)),this.program.link(),this.program.use(),this.vertexPositionAttribute=this.program.getAttributeLocation("aVertexPosition"),this.gl.enableVertexAttribArray(this.vertexPositionAttribute),this.textureCoordAttribute=this.program.getAttributeLocation("aTextureCoord"),this.gl.enableVertexAttribArray(this.textureCoordAttribute)},onInitTextures:function(){console.log("creatingTextures: size: "+this.size),this.YTexture=new s(this.gl,this.size),this.UTexture=new s(this.gl,this.size.getHalfSize()),this.VTexture=new s(this.gl,this.size.getHalfSize())},onInitSceneTextures:function(){this.YTexture.bind(0,this.program,"YTexture"),this.UTexture.bind(1,this.program,"UTexture"),this.VTexture.bind(2,this.program,"VTexture")},fillYUVTextures:function(e,t,n){this.YTexture.fill(e),this.UTexture.fill(t),this.VTexture.fill(n)},decode:function(e,t,n){if(!e)return console.error("decode buffer is null"),!1;if(this.resize(new o(t,n)),!this.YTexture)return console.error("this.YTexture is null or undefined"),!1;var r=t*n,i=r>>2;return this.YTexture.fill(e.subarray(0,r)),this.UTexture.fill(e.subarray(r,r+i)),this.VTexture.fill(e.subarray(r+i,r+2*i)),this.drawScene(),!0},toString:function(){return"YUVCanvas Size: "+this.size},destroy:function(){try{if(this.gl){let e=this.gl.getExtension("WEBGL_lose_context");e&&e.loseContext()}}catch(e){console.warn(e)}},clear:function(){this.gl&&(this.gl.clearColor(0,0,0,1),this.gl.clear(this.gl.COLOR_BUFFER_BIT))}});e.exports=h},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.DISABLED=0]="DISABLED",e[e.FATAL=1]="FATAL",e[e.ERROR=10]="ERROR",e[e.WARNING=20]="WARNING",e[e.INFO=40]="INFO",e[e.DEBUG=50]="DEBUG",e[e.VERBOSE=60]="VERBOSE"}(r=t.LogLevel||(t.LogLevel={}));var o=function(){function e(){e._logLevel=r.INFO}return e.setLogLevel=function(e){this._logLevel=e},e.getLogLevel=function(){return this._logLevel},e.getNowFormatDate=function(){var e,t,n=new Date,r=n.getMonth()+1,o=n.getDate();return e=r>=1&&r<=9?"0"+r:""+r,t=o>=0&&o<=9?"0"+o:""+o,n.getFullYear()+"-"+e+"-"+t+" "+n.getHours()+":"+n.getMinutes()+":"+n.getSeconds()+":"+n.getMilliseconds()},e.LOGI=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];e._logLevel<r.INFO||("Microsoft Internet Explorer"==navigator.appName&&parseInt(navigator.appVersion.split(";")[1].replace(/[ ]/g,"").replace("MSIE",""))<11?console.log("YouMeVideo -INFO- "+this.getNowFormatDate()+t):console.log.apply(console,["YouMeVideo -INFO- ",this.getNowFormatDate()].concat(t)))},e.LOGW=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];e._logLevel<r.WARNING||("Microsoft Internet Explorer"==navigator.appName&&parseInt(navigator.appVersion.split(";")[1].replace(/[ ]/g,"").replace("MSIE",""))<11?console.warn("YouMeVideo -WARNING- "+this.getNowFormatDate()+t):console.warn.apply(console,["YouMeVideo -WARNING- ",this.getNowFormatDate()].concat(t)))},e.LOGE=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];e._logLevel<r.ERROR||("Microsoft Internet Explorer"==navigator.appName&&parseInt(navigator.appVersion.split(";")[1].replace(/[ ]/g,"").replace("MSIE",""))<11?console.error("YouMeVideo -ERROR- "+this.getNowFormatDate()+t):console.error.apply(console,["YouMeVideo -ERROR- ",this.getNowFormatDate()].concat(t)))},e._logLevel=r.INFO,e}();t.YMLogUtils=o}]).default;